<!doctype html>
<html lang="da">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Min m√•de at l√¶re p√• ‚Äì Prompt-generator</title>
  <style>
    :root{
      --bg: #f6f3ee;
      --paper: #fffdf9;
      --ink: #1f2937;
      --muted:#6b7280;
      --line:#e6dccf;
      --accent:#1e7b6a;
      --accent2:#e05a3b;
      --chip:#eef5f3;
      --shadow: 0 12px 30px rgba(17,24,39,.10);
      --radius: 18px;
      --radius2: 12px;
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: var(--sans);
      color: var(--ink);
      background:
        radial-gradient(1100px 700px at 20% 10%, #fff 0%, transparent 60%),
        radial-gradient(900px 600px at 90% 30%, #fff 0%, transparent 55%),
        linear-gradient(180deg, #f7f2ea 0%, var(--bg) 100%);
    }

    /* Layout */
    .shell{
      max-width: 1180px;
      margin: 0 auto;
      padding: 18px 14px 28px;
      display: grid;
      grid-template-columns: 360px 1fr;
      gap: 16px;
      align-items: start;
    }

    @media (max-width: 980px){
      .shell{grid-template-columns: 1fr; }
      .side{position: static !important}
    }

    .mast{
      max-width: 1180px;
      margin: 0 auto;
      padding: 18px 14px 0;
    }

    .hero{
      background: linear-gradient(90deg, #ffffffcc, #fffdf9cc);
      border: 1px solid var(--line);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 16px 16px 14px;
      overflow: hidden;
      position: relative;
    }
    .hero:before{
      content:"";
      position:absolute;
      inset:-2px;
      background:
        linear-gradient(120deg, transparent 0%, rgba(30,123,106,.08) 40%, transparent 70%),
        radial-gradient(600px 220px at 10% 0%, rgba(224,90,59,.10), transparent 60%);
      pointer-events:none;
    }
    .hero h1{
      margin: 0 0 6px;
      letter-spacing: .5px;
      text-transform: uppercase;
      font-size: 20px;
      position: relative;
    }
    .hero p{
      margin: 0;
      color: var(--muted);
      font-size: 14px;
      line-height: 1.35;
      position: relative;
    }

    .side{
      position: sticky;
      top: 14px;
      display:flex;
      flex-direction:column;
      gap: 12px;
    }

    .card{
      background: var(--paper);
      border: 1px solid var(--line);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 14px;
    }

    .card h2{
      margin: 0 0 10px;
      font-size: 15px;
      letter-spacing:.2px;
    }

    .mini{
      font-size: 13px;
      color: var(--muted);
      line-height: 1.35;
    }

    .row{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:10px;
    }
    @media (max-width: 420px){
      .row{grid-template-columns: 1fr;}
    }

    label{
      display:block;
      font-size: 13px;
      margin: 0 0 6px;
      color: var(--muted);
    }
    input[type="text"], textarea{
      width:100%;
      padding: 10px 10px;
      border-radius: 12px;
      border: 1px solid var(--line);
      outline:none;
      background: #fff;
      color: var(--ink);
      font-size: 14px;
    }
    textarea{min-height: 84px; resize: vertical}

    .btns{
      display:flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 10px;
    }

    button{
      border: 1px solid var(--line);
      background: #fff;
      color: var(--ink);
      border-radius: 14px;
      padding: 10px 12px;
      font-weight: 650;
      font-size: 13px;
      cursor:pointer;
      transition: transform .05s ease, box-shadow .2s ease, border-color .2s ease;
    }
    button:hover{box-shadow: 0 10px 18px rgba(17,24,39,.10); border-color:#d7c6b5}
    button:active{transform: translateY(1px)}
    .primary{
      background: linear-gradient(180deg, #1e7b6a 0%, #166356 100%);
      color: #fff;
      border-color: rgba(30,123,106,.55);
    }
    .danger{
      background: linear-gradient(180deg, #e05a3b 0%, #c84b2f 100%);
      color:#fff;
      border-color: rgba(224,90,59,.55);
    }
    .ghost{
      background: #fff;
      color: var(--ink);
    }

    .pillbar{
      display:flex;
      flex-wrap:wrap;
      gap:8px;
      margin-top: 8px;
    }
    .pill{
      font-size: 12px;
      padding: 6px 10px;
      border-radius: 999px;
      background: var(--chip);
      border: 1px solid rgba(30,123,106,.18);
      color: #12473f;
      font-weight: 650;
    }

    .main{
      display:flex;
      flex-direction: column;
      gap: 12px;
    }

    /* Questionnaire / ‚Äúmath book‚Äù sections */
    .section{
      background: var(--paper);
      border: 1px solid var(--line);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 14px;
      position: relative;
      overflow: hidden;
    }
    .section:before{
      content:"";
      position:absolute;
      inset: -1px;
      background:
        radial-gradient(560px 220px at 80% 0%, rgba(30,123,106,.07), transparent 60%),
        radial-gradient(520px 220px at 15% 100%, rgba(224,90,59,.07), transparent 62%);
      pointer-events:none;
    }

    .sectionHeader{
      display:flex;
      align-items:flex-start;
      justify-content: space-between;
      gap: 10px;
      margin-bottom: 10px;
      position: relative;
    }
    .sectionHeader h3{
      margin: 0;
      font-size: 15px;
      letter-spacing:.2px;
    }
    .rule{
      font-size: 12px;
      color: var(--muted);
      white-space: nowrap;
      border: 1px dashed #d8cbbb;
      padding: 6px 10px;
      border-radius: 999px;
      background: #fff;
    }

    .options{
      display:flex;
      flex-direction: column; /* IMPORTANT: vertical stacking */
      gap: 8px;
      position: relative;
    }

    .opt{
      display:flex;
      align-items:flex-start;
      gap: 10px;
      padding: 10px 10px;
      border-radius: 14px;
      border: 1px solid var(--line);
      background: #fff;
      transition: border-color .2s ease, transform .05s ease;
    }
    .opt:hover{border-color:#d7c6b5}
    .opt:active{transform: translateY(1px)}
    .opt input{margin-top: 2px; transform: scale(1.12)}
    .opt span{
      font-size: 14px;
      line-height: 1.25;
    }

    .inline{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
      margin-top: 10px;
      position: relative;
    }
    .hint{
      font-size: 12px;
      color: var(--muted);
    }

    /* Output */
    .output{
      background: #0b1220;
      color: #e5e7eb;
      border-radius: var(--radius);
      border: 1px solid rgba(255,255,255,.12);
      padding: 12px;
      box-shadow: 0 14px 34px rgba(11,18,32,.24);
    }
    .outputTop{
      display:flex;
      justify-content: space-between;
      align-items:center;
      gap: 10px;
      margin-bottom: 10px;
    }
    .outputTop strong{font-size: 13px; letter-spacing:.2px}
    .meter{
      font-size: 12px;
      color: rgba(229,231,235,.8);
      font-family: var(--mono);
    }
    pre{
      margin:0;
      white-space: pre-wrap;
      word-break: break-word;
      font-family: var(--mono);
      font-size: 12.5px;
      line-height: 1.35;
    }

    .toast{
      position: fixed;
      left: 50%;
      bottom: 16px;
      transform: translateX(-50%);
      background: rgba(17,24,39,.92);
      color: #fff;
      padding: 10px 12px;
      border-radius: 999px;
      font-size: 13px;
      border: 1px solid rgba(255,255,255,.16);
      opacity:0;
      pointer-events:none;
      transition: opacity .2s ease, transform .2s ease;
    }
    .toast.show{
      opacity:1;
      transform: translateX(-50%) translateY(-2px);
    }

    /* Small ‚Äúworksheet vibe‚Äù preview box */
    .worksheetPreview{
      margin-top: 10px;
      border-radius: var(--radius2);
      border: 1px solid var(--line);
      background:
        linear-gradient(180deg, #fff 0%, #fffdf8 100%);
      padding: 12px;
      position: relative;
    }
    .worksheetPreview h4{
      margin:0 0 8px;
      font-size: 13px;
      text-transform: uppercase;
      letter-spacing: .6px;
    }
    .previewGrid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
    }
    @media (max-width: 680px){
      .previewGrid{grid-template-columns:1fr}
    }
    .previewBox{
      border: 1px dashed #d6c7b6;
      border-radius: 12px;
      padding: 10px;
      background: #fff;
      min-height: 70px;
    }
    .previewBox b{
      display:block;
      font-size: 12px;
      margin-bottom: 6px;
      color: #0f172a;
    }
    .previewBox div{
      font-size: 12px;
      color: var(--muted);
      line-height: 1.35;
    }

    .footerNote{
      text-align:center;
      color: var(--muted);
      font-size: 12px;
      margin-top: 10px;
    }
  </style>
</head>
<body>
  <div class="mast">
    <div class="hero">
      <h1>MIN M√ÖDE AT L√ÜRE P√Ö</h1>
      <p>Udfyld sp√∏rgeskemaet. Tryk ‚ÄúLav prompt‚Äù. Download som .txt og send til Anders. (Ingen rigtige eller forkerte svar.)</p>
    </div>
  </div>

  <div class="shell">
    <!-- Sidebar: student info + actions + output -->
    <aside class="side">
      <div class="card">
        <h2>Elev</h2>
        <div class="row">
          <div>
            <label for="studentName">Navn</label>
            <input id="studentName" type="text" placeholder="Fx Rose / Arly / ‚Ä¶">
          </div>
          <div>
            <label for="studentClass">Klasse</label>
            <input id="studentClass" type="text" placeholder="Fx 4.Y">
          </div>
        </div>

        <div class="pillbar" aria-label="Tips">
          <div class="pill">V√¶lg √¶rligt</div>
          <div class="pill">Flere krydser ok</div>
          <div class="pill">Nemt at printe</div>
        </div>

        <div class="btns">
          <button class="primary" id="makePromptBtn">Lav prompt</button>
          <button class="ghost" id="copyBtn">Kopi√©r</button>
          <button class="ghost" id="downloadBtn">Download .txt</button>
          <button class="danger" id="resetBtn">Nulstil</button>
        </div>

        <div class="inline">
          <span class="hint">Autosave: <b>til</b> (gemmes i browseren)</span>
        </div>
      </div>

      <div class="card">
        <h2>Prompt (klar til ChatGPT)</h2>
        <div class="output" role="region" aria-label="Prompt output">
          <div class="outputTop">
            <strong>Output</strong>
            <div class="meter" id="charCount">0 tegn</div>
          </div>
          <pre id="promptOut">Tryk ‚ÄúLav prompt‚Äù n√•r du er klar‚Ä¶</pre>
        </div>

        <div class="worksheetPreview" aria-label="Visuel fornemmelse af matematik-ark">
          <h4>S√•dan kommer elev-arket til at f√∏les</h4>
          <div class="previewGrid">
            <div class="previewBox">
              <b>Lektion 1</b>
              <div>Tydelige opgavebokse ¬∑ Basis/Plus/Challenge ¬∑ plads til svar</div>
            </div>
            <div class="previewBox">
              <b>Lektion 2</b>
              <div>Samme layout ¬∑ nye kontekster ud fra elevens interesser</div>
            </div>
          </div>
        </div>

        <div class="footerNote">Tip: N√•r du f√•r .txt-filen, kan du bare copy/paste hele prompten i ChatGPT.</div>
      </div>
    </aside>

    <!-- Main: questionnaire -->
    <main class="main" aria-label="Sp√∏rgeskema">
      <!-- 1 -->
      <section class="section" data-q="q1">
        <div class="sectionHeader">
          <h3>üß† 1. N√•r jeg arbejder med matematik ‚Ä¶</h3>
          <div class="rule">Max 1 kryds</div>
        </div>
        <div class="options" role="group" aria-label="Q1">
          <label class="opt"><input type="radio" name="q1" value="Det f√∏les let for mig"><span>Det f√∏les let for mig</span></label>
          <label class="opt"><input type="radio" name="q1" value="Det f√∏les ok ‚Äì noget er let, noget er sv√¶rt"><span>Det f√∏les ok ‚Äì noget er let, noget er sv√¶rt</span></label>
          <label class="opt"><input type="radio" name="q1" value="Det f√∏les sv√¶rt, men jeg vil gerne blive bedre"><span>Det f√∏les sv√¶rt, men jeg vil gerne blive bedre</span></label>
          <label class="opt"><input type="radio" name="q1" value="Det afh√¶nger af, hvad vi arbejder med"><span>Det afh√¶nger af, hvad vi arbejder med</span></label>
        </div>
      </section>

      <!-- 2 -->
      <section class="section" data-q="q2">
        <div class="sectionHeader">
          <h3>üöÄ 2. N√•r vi starter p√• en ny opgave, vil jeg helst ‚Ä¶</h3>
          <div class="rule">Max 1 kryds</div>
        </div>
        <div class="options" role="group" aria-label="Q2">
          <label class="opt"><input type="radio" name="q2" value="Starte med noget let og blive sikker"><span>Starte med noget let og blive sikker</span></label>
          <label class="opt"><input type="radio" name="q2" value="Starte med noget sv√¶rt og udfordre mig selv"><span>Starte med noget sv√¶rt og udfordre mig selv</span></label>
        </div>
      </section>

      <!-- 3 -->
      <section class="section" data-q="q3">
        <div class="sectionHeader">
          <h3>üî¢ 3. Jeg vil gerne blive bedre til ‚Ä¶</h3>
          <div class="rule">V√¶lg flere</div>
        </div>
        <div class="options" role="group" aria-label="Q3">
          <label class="opt"><input type="checkbox" name="q3" value="Plus og minus"><span>Plus og minus</span></label>
          <label class="opt"><input type="checkbox" name="q3" value="Gange"><span>Gange</span></label>
          <label class="opt"><input type="checkbox" name="q3" value="Division"><span>Division</span></label>
          <label class="opt"><input type="checkbox" name="q3" value="Br√∏ker (pizza-, kage- og del-tal)"><span>Br√∏ker (pizza-, kage- og del-tal üçï)</span></label>
          <label class="opt"><input type="checkbox" name="q3" value="M√•ling (tid, penge, l√¶ngde, v√¶gt)"><span>M√•ling (tid, penge, l√¶ngde, v√¶gt)</span></label>
          <label class="opt"><input type="checkbox" name="q3" value="Problemer og g√•der"><span>Problemer og g√•der</span></label>
          <label class="opt"><input type="checkbox" name="q3" value="Matematik med historier og fantasi"><span>Matematik med historier og fantasi</span></label>
        </div>
      </section>

      <!-- 4 -->
      <section class="section" data-q="q4">
        <div class="sectionHeader">
          <h3>üéÆ 4. Matematik er sjovest for mig, n√•r det handler om ‚Ä¶</h3>
          <div class="rule">V√¶lg flere</div>
        </div>
        <div class="options" role="group" aria-label="Q4">
          <label class="opt"><input type="checkbox" name="q4" value="Spil"><span>Spil</span></label>
          <label class="opt"><input type="checkbox" name="q4" value="Sport"><span>Sport</span></label>
          <label class="opt"><input type="checkbox" name="q4" value="Gaming"><span>Gaming</span></label>
          <label class="opt"><input type="checkbox" name="q4" value="Dyr"><span>Dyr</span></label>
          <label class="opt"><input type="checkbox" name="q4" value="Mad og butikker"><span>Mad og butikker</span></label>
          <label class="opt"><input type="checkbox" name="q4" value="Musik, dans eller TikTok"><span>Musik, dans eller TikTok</span></label>
          <label class="opt"><input type="checkbox" name="q4" value="Eventyr, fantasi og magi"><span>Eventyr, fantasi og magi</span></label>
          <label class="opt"><input type="checkbox" name="q4" value="Virkelige ting fra hverdagen"><span>Virkelige ting fra hverdagen</span></label>
        </div>
        <div class="inline">
          <div style="flex:1">
            <label for="q4extra">Uddyb (valgfrit)</label>
            <input id="q4extra" type="text" placeholder="Fx Minecraft, heste, madlavning, fodbold, ‚Ä¶">
          </div>
        </div>
      </section>

      <!-- 5 -->
      <section class="section" data-q="q5">
        <div class="sectionHeader">
          <h3>üß© 5. N√•r jeg arbejder bedst, er det fordi ‚Ä¶</h3>
          <div class="rule">Max 2 krydser</div>
        </div>
        <div class="options limit2" role="group" aria-label="Q5" data-limit="2" data-name="q5">
          <label class="opt"><input type="checkbox" name="q5" value="Jeg kan arbejde i ro"><span>Jeg kan arbejde i ro</span></label>
          <label class="opt"><input type="checkbox" name="q5" value="Jeg kan tale med andre"><span>Jeg kan tale med andre</span></label>
          <label class="opt"><input type="checkbox" name="q5" value="Jeg kan bev√¶ge mig lidt"><span>Jeg kan bev√¶ge mig lidt</span></label>
          <label class="opt"><input type="checkbox" name="q5" value="Jeg kan skifte mellem opgaver"><span>Jeg kan skifte mellem opgaver</span></label>
          <label class="opt"><input type="checkbox" name="q5" value="Jeg ved pr√¶cis, hvad jeg skal"><span>Jeg ved pr√¶cis, hvad jeg skal</span></label>
          <label class="opt"><input type="checkbox" name="q5" value="Jeg selv m√• v√¶lge noget"><span>Jeg selv m√• v√¶lge noget</span></label>
        </div>
      </section>

      <!-- 6 -->
      <section class="section" data-q="q6">
        <div class="sectionHeader">
          <h3>üë• 6. Jeg arbejder bedst ‚Ä¶</h3>
          <div class="rule">Max 1 kryds</div>
        </div>
        <div class="options" role="group" aria-label="Q6">
          <label class="opt"><input type="radio" name="q6" value="Alene"><span>Alene</span></label>
          <label class="opt"><input type="radio" name="q6" value="Sammen med √©n anden"><span>Sammen med √©n anden</span></label>
          <label class="opt"><input type="radio" name="q6" value="I en lille gruppe"><span>I en lille gruppe</span></label>
          <label class="opt"><input type="radio" name="q6" value="Forskelligt ‚Äì det kommer an p√• opgaven"><span>Forskelligt ‚Äì det kommer an p√• opgaven</span></label>
        </div>
      </section>

      <!-- 7 -->
      <section class="section" data-q="q7">
        <div class="sectionHeader">
          <h3>üõ†Ô∏è 7. N√•r jeg skal l√¶re noget nyt, hj√¶lper det mig mest at ‚Ä¶</h3>
          <div class="rule">Max 2 krydser</div>
        </div>
        <div class="options limit2" role="group" aria-label="Q7" data-limit="2" data-name="q7">
          <label class="opt"><input type="checkbox" name="q7" value="F√• det forklaret"><span>F√• det forklaret</span></label>
          <label class="opt"><input type="checkbox" name="q7" value="Se et eksempel"><span>Se et eksempel</span></label>
          <label class="opt"><input type="checkbox" name="q7" value="Pr√∏ve selv"><span>Pr√∏ve selv</span></label>
          <label class="opt"><input type="checkbox" name="q7" value="Tale med andre om det"><span>Tale med andre om det</span></label>
          <label class="opt"><input type="checkbox" name="q7" value="Tegne eller skrive"><span>Tegne eller skrive</span></label>
        </div>
      </section>

      <!-- 8 -->
      <section class="section" data-q="q8">
        <div class="sectionHeader">
          <h3>üß† 8. N√•r noget er sv√¶rt, vil jeg helst ‚Ä¶</h3>
          <div class="rule">Max 1 kryds</div>
        </div>
        <div class="options" role="group" aria-label="Q8">
          <label class="opt"><input type="radio" name="q8" value="Kunne sp√∏rge l√¶rerne"><span>Kunne sp√∏rge l√¶rerne</span></label>
          <label class="opt"><input type="radio" name="q8" value="Pr√∏ve selv f√∏rst"><span>Pr√∏ve selv f√∏rst</span></label>
          <label class="opt"><input type="radio" name="q8" value="Sp√∏rge en ven"><span>Sp√∏rge en ven</span></label>
        </div>
      </section>

      <!-- 9 -->
      <section class="section" data-q="q9">
        <div class="sectionHeader">
          <h3>üéõÔ∏è 9. N√•r vi arbejder i matematik, vil jeg helst ‚Ä¶</h3>
          <div class="rule">Max 1 kryds</div>
        </div>
        <div class="options" role="group" aria-label="Q9">
          <label class="opt"><input type="radio" name="q9" value="Have faste opgaver"><span>Have faste opgaver</span></label>
          <label class="opt"><input type="radio" name="q9" value="Kunne skifte mellem opgaver undervejs"><span>Kunne skifte mellem opgaver undervejs</span></label>
        </div>
      </section>

      <!-- 10 -->
      <section class="section" data-q="q10">
        <div class="sectionHeader">
          <h3>üîÑ 10. Jeg kan godt lide at ‚Ä¶</h3>
          <div class="rule">Max 1 kryds</div>
        </div>
        <div class="options" role="group" aria-label="Q10">
          <label class="opt"><input type="radio" name="q10" value="Arbejde l√¶nge med √©n opgave"><span>Arbejde l√¶nge med √©n opgave</span></label>
          <label class="opt"><input type="radio" name="q10" value="Arbejde med flere sm√• opgaver"><span>Arbejde med flere sm√• opgaver</span></label>
        </div>
      </section>

      <!-- 11 -->
      <section class="section" data-q="q11">
        <div class="sectionHeader">
          <h3>‚≠ê 11. Det g√∏r mig stolt i skolen, n√•r ‚Ä¶</h3>
          <div class="rule">Max 1 kryds</div>
        </div>
        <div class="options" role="group" aria-label="Q11">
          <label class="opt"><input type="radio" name="q11" value="Jeg forst√•r noget nyt"><span>Jeg forst√•r noget nyt</span></label>
          <label class="opt"><input type="radio" name="q11" value="Jeg bliver bedre end f√∏r"><span>Jeg bliver bedre end f√∏r</span></label>
          <label class="opt"><input type="radio" name="q11" value="Jeg klarer en sv√¶r opgave"><span>Jeg klarer en sv√¶r opgave</span></label>
        </div>
      </section>

      <!-- 12 -->
      <section class="section" data-q="q12">
        <div class="sectionHeader">
          <h3>üéí 12. Jeg vil gerne blive bedre til ‚Ä¶</h3>
          <div class="rule">V√¶lg flere</div>
        </div>
        <div class="options" role="group" aria-label="Q12">
          <label class="opt"><input type="checkbox" name="q12" value="At koncentrere mig"><span>At koncentrere mig</span></label>
          <label class="opt"><input type="checkbox" name="q12" value="At arbejde selv"><span>At arbejde selv</span></label>
          <label class="opt"><input type="checkbox" name="q12" value="At arbejde sammen med andre"><span>At arbejde sammen med andre</span></label>
          <label class="opt"><input type="checkbox" name="q12" value="At forklare mine tanker"><span>At forklare mine tanker</span></label>
          <label class="opt"><input type="checkbox" name="q12" value="At turde pr√∏ve sv√¶re ting"><span>At turde pr√∏ve sv√¶re ting</span></label>
        </div>
      </section>

      <!-- 13 -->
      <section class="section" data-q="q13">
        <div class="sectionHeader">
          <h3>üåà 13. Hvis skolen var helt perfekt for mig, ville den ‚Ä¶</h3>
          <div class="rule">V√¶lg flere</div>
        </div>
        <div class="options" role="group" aria-label="Q13">
          <label class="opt"><input type="checkbox" name="q13" value="Have flere valg"><span>Have flere valg</span></label>
          <label class="opt"><input type="checkbox" name="q13" value="Have flere kreative opgaver"><span>Have flere kreative opgaver</span></label>
          <label class="opt"><input type="checkbox" name="q13" value="Have mere ro"><span>Have mere ro</span></label>
          <label class="opt"><input type="checkbox" name="q13" value="Have mere bev√¶gelse"><span>Have mere bev√¶gelse</span></label>
          <label class="opt"><input type="checkbox" name="q13" value="Have mere leg og fantasi"><span>Have mere leg og fantasi</span></label>
          <label class="opt"><input type="checkbox" name="q13" value="Have mere tid til fordybelse"><span>Have mere tid til fordybelse</span></label>
        </div>
      </section>

      <!-- 14 -->
      <section class="section" data-q="q14">
        <div class="sectionHeader">
          <h3>‚úçÔ∏è 14. Er der noget, vi som l√¶rere skal vide om dig? (frivilligt)</h3>
          <div class="rule">Tekst</div>
        </div>
        <div class="inline" style="margin-top:0">
          <div style="flex:1; position:relative">
            <label for="q14text">Skriv her (valgfrit)</label>
            <textarea id="q14text" placeholder="Fx: Jeg bliver hurtigt tr√¶t sidst p√• dagen / Jeg vil gerne have tydelige trin / Jeg bliver rolig af ‚Ä¶"></textarea>
          </div>
        </div>
      </section>
    </main>
  </div>

  <div class="toast" id="toast" role="status" aria-live="polite"></div>

  <script>
    // ---------------------------
    // Helpers
    // ---------------------------
    const $ = (sel, root=document) => root.querySelector(sel);
    const $$ = (sel, root=document) => Array.from(root.querySelectorAll(sel));

    const toastEl = $("#toast");
    let toastTimer = null;
    function toast(msg){
      toastEl.textContent = msg;
      toastEl.classList.add("show");
      clearTimeout(toastTimer);
      toastTimer = setTimeout(()=>toastEl.classList.remove("show"), 1600);
    }

    function uniq(arr){
      return Array.from(new Set(arr)).filter(Boolean);
    }

    function getCheckedValues(name){
      return $$(`input[name="${name}"]:checked`).map(i => i.value);
    }

    function getRadioValue(name){
      const el = $(`input[name="${name}"]:checked`);
      return el ? el.value : "";
    }

    function cleanLines(s){
      return (s || "")
        .split("\n")
        .map(l => l.trim())
        .filter(Boolean)
        .join("\n");
    }

    // ---------------------------
    // Max-2 limiter for checkboxes
    // ---------------------------
    function setupLimiters(){
      $$(".limit2").forEach(group=>{
        const limit = Number(group.dataset.limit || 2);
        const inputs = $$('input[type="checkbox"]', group);

        inputs.forEach(inp=>{
          inp.addEventListener("change", ()=>{
            const checked = inputs.filter(i=>i.checked);
            if(checked.length > limit){
              // undo latest
              inp.checked = false;
              toast(`Max ${limit} krydser her üôÇ`);
            }
            saveState();
          });
        });
      });
    }

    // ---------------------------
    // Autosave (localStorage)
    // ---------------------------
    const LS_KEY = "math_prompt_form_v1";
    function saveState(){
      const state = {
        studentName: $("#studentName").value.trim(),
        studentClass: $("#studentClass").value.trim(),
        q4extra: $("#q4extra").value.trim(),
        q14text: $("#q14text").value.trim(),
        checked: $$("input").filter(i=>i.checked).map(i=>({name:i.name, value:i.value, type:i.type}))
      };
      localStorage.setItem(LS_KEY, JSON.stringify(state));
    }

    function loadState(){
      const raw = localStorage.getItem(LS_KEY);
      if(!raw) return;
      try{
        const state = JSON.parse(raw);
        $("#studentName").value = state.studentName || "";
        $("#studentClass").value = state.studentClass || "";
        $("#q4extra").value = state.q4extra || "";
        $("#q14text").value = state.q14text || "";

        // Clear
        $$("input").forEach(i=>i.checked=false);

        // Restore
        (state.checked || []).forEach(item=>{
          const candidates = $$(`input[name="${item.name}"]`);
          const match = candidates.find(c => c.value === item.value && c.type === item.type);
          if(match) match.checked = true;
        });
      }catch(e){
        console.warn("Could not load state", e);
      }
    }

    function bindAutosave(){
      $$("input, textarea").forEach(el=>{
        el.addEventListener("input", saveState);
        el.addEventListener("change", saveState);
      });
    }

    // ---------------------------
    // Prompt generation
    // ---------------------------
    function buildPrompt(){
      const studentName = ($("#studentName").value || "").trim() || "___";
      const studentClass = ($("#studentClass").value || "").trim() || "4.__";

      const answers = {
        q1: getRadioValue("q1"),
        q2: getRadioValue("q2"),
        q3: getCheckedValues("q3"),
        q4: getCheckedValues("q4"),
        q4extra: ($("#q4extra").value || "").trim(),
        q5: getCheckedValues("q5"),
        q6: getRadioValue("q6"),
        q7: getCheckedValues("q7"),
        q8: getRadioValue("q8"),
        q9: getRadioValue("q9"),
        q10: getRadioValue("q10"),
        q11: getRadioValue("q11"),
        q12: getCheckedValues("q12"),
        q13: getCheckedValues("q13"),
        q14: ($("#q14text").value || "").trim()
      };

      const fmtList = (arr) => arr && arr.length ? arr.map(x=>`- ${x}`).join("\n") : "- (intet valgt)";
      const fmtSingle = (s) => s ? s : "(ikke valgt)";

      const interests = uniq([...(answers.q4||[]), answers.q4extra]).filter(Boolean);
      const focusAreas = uniq([...(answers.q3||[])]).filter(Boolean);

      const prompt =
`Du er en dansk matematikl√¶rer for 4. klasse og didaktisk designer.

Lav et PERSONLIGT matematikforl√∏b til eleven ud fra elevens besvarelse.

KRAV (skal overholdes):
- Varighed: 2 lektioner √° 45 minutter (2√ó45 min).
- Output: KUN opgaver/arbejdsark-tekst. Ingen beskeder til l√¶rer eller elever. Ingen introduktion. Ingen forklaringer.
- Differentiering: For hver lektion skal der v√¶re 3 spor: Basis / Plus / Challenge.
- Klarhed: Super tydeligt layout, s√• det kan printes direkte p√• A4.
- Realistisk 4. klasse med stor niveauspredning:
  - Basis skal kunne l√∏ses af elever der k√¶mper.
  - Challenge m√• str√¶kke de st√¶rke.
- Brug elevens interesser aktivt i opgavekontekster.
- Respekt√©r elevens pr√¶ferencer for ro/samarbejde/bev√¶gelse/valg og l√¶ringsstrategier.
- Opgaverne skal ligne en klassisk matematikbog:
  - store tydelige overskrifter
  - opgavebokse
  - nummerering
  - plads til at skrive svar (fx ‚ÄúSvar: ____‚Äù)
  - ingen pyntetekst der forvirrer

ELEVINFO:
Navn: ${studentName}
Klasse: ${studentClass}

SP√òRGESKEMA-SVAR:

1) N√•r jeg arbejder med matematik:
${fmtSingle(answers.q1)}

2) N√•r vi starter p√• en ny opgave, vil jeg helst:
${fmtSingle(answers.q2)}

3) Jeg vil gerne blive bedre til:
${fmtList(answers.q3)}

4) Matematik er sjovest for mig, n√•r det handler om:
${fmtList(answers.q4)}
Uddyb: ${answers.q4extra ? answers.q4extra : "(ingen)"}

5) N√•r jeg arbejder bedst, er det fordi (max 2):
${fmtList(answers.q5)}

6) Jeg arbejder bedst:
${fmtSingle(answers.q6)}

7) N√•r jeg skal l√¶re noget nyt, hj√¶lper det mig mest (max 2):
${fmtList(answers.q7)}

8) N√•r noget er sv√¶rt, vil jeg helst:
${fmtSingle(answers.q8)}

9) N√•r vi arbejder i matematik, vil jeg helst:
${fmtSingle(answers.q9)}

10) Jeg kan godt lide at:
${fmtSingle(answers.q10)}

11) Det g√∏r mig stolt i skolen, n√•r:
${fmtSingle(answers.q11)}

12) Jeg vil gerne blive bedre til:
${fmtList(answers.q12)}

13) Hvis skolen var helt perfekt for mig, ville den:
${fmtList(answers.q13)}

14) Ekstra (frivilligt):
${answers.q14 ? answers.q14 : "(ingen)"}

EKSTRA DESIGNKRAV til opgaverne:
- Brug prim√¶rt disse fokusomr√•der: ${focusAreas.length ? focusAreas.join(", ") : "v√¶lg ud fra svarene"}.
- Brug mindst 2 af disse interesse-temaer i opgaverne: ${interests.length ? interests.join(", ") : "v√¶lg et neutralt tema"}.
- Hver lektion skal fylde ca. 45 minutter: nok opgaver pr. spor.
- Variation: bland fx regnestrategier, probleml√∏sning, sm√• tekststykker, og m√•l/penge/tid hvis det passer.

VIGTIGT: Din respons skal KUN v√¶re selve arbejdsarket i printbart layout. Intet andet.`;

      return prompt;
    }

    function setPromptOut(text){
      const out = $("#promptOut");
      out.textContent = text;
      $("#charCount").textContent = `${text.length} tegn`;
    }

    // ---------------------------
    // Copy / download / reset
    // ---------------------------
    async function copyPrompt(){
      const text = $("#promptOut").textContent || "";
      if(!text || text.includes("Tryk ‚ÄúLav prompt‚Äù")){ toast("Lav prompt f√∏rst üôÇ"); return; }
      try{
        await navigator.clipboard.writeText(text);
        toast("Kopieret ‚úÖ");
      }catch(e){
        // fallback
        const ta = document.createElement("textarea");
        ta.value = text;
        document.body.appendChild(ta);
        ta.select();
        document.execCommand("copy");
        ta.remove();
        toast("Kopieret ‚úÖ");
      }
    }

    function downloadTxt(){
      const text = $("#promptOut").textContent || "";
      if(!text || text.includes("Tryk ‚ÄúLav prompt‚Äù")){ toast("Lav prompt f√∏rst üôÇ"); return; }

      const name = ($("#studentName").value || "elev").trim().replace(/[^\w\-]+/g,"_");
      const klass = ($("#studentClass").value || "klasse").trim().replace(/[^\w\-]+/g,"_");
      const filename = `prompt_${klass}_${name}.txt`;

      const blob = new Blob([text], {type:"text/plain;charset=utf-8"});
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = filename;
      document.body.appendChild(a);
      a.click();
      a.remove();
      URL.revokeObjectURL(url);
      toast("Downloaded üìÑ");
    }

    function resetAll(){
      if(!confirm("Vil du nulstille alt?")) return;
      $$("input").forEach(i=>i.checked=false);
      $("#studentName").value="";
      $("#studentClass").value="";
      $("#q4extra").value="";
      $("#q14text").value="";
      localStorage.removeItem(LS_KEY);
      setPromptOut("Tryk ‚ÄúLav prompt‚Äù n√•r du er klar‚Ä¶");
      toast("Nulstillet");
    }

    // ---------------------------
    // Init
    // ---------------------------
    setupLimiters();
    loadState();
    bindAutosave();

    $("#makePromptBtn").addEventListener("click", ()=>{
      const prompt = buildPrompt();
      setPromptOut(prompt);
      saveState();
      toast("Prompt klar ‚úÖ");
    });

    $("#copyBtn").addEventListener("click", copyPrompt);
    $("#downloadBtn").addEventListener("click", downloadTxt);
    $("#resetBtn").addEventListener("click", resetAll);
  </script>
</body>
</html>
