<!doctype html>
<html lang="da">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mit personlige matematikforl√∏b ‚Äì Prompt-generator</title>

  <style>
    :root{
      --bgA:#d7efe9;
      --bgB:#f6efe6;
      --ink:#0f172a;
      --muted:#475569;

      --line:#e7dccb;
      --line2:#d9cdbb;

      --teal:#2a8f8d;
      --tealDeep:#1e6f6d;
      --sand:#f4e7d5;
      --ochre:#f0b74a;
      --coral:#e4664f;
      --plum:#8a6bbd;

      --shadow: 0 18px 40px rgba(2,6,23,.10);
      --shadow2: 0 12px 26px rgba(2,6,23,.08);

      --radius: 18px;
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family: var(--sans);
      color: var(--ink);
      background:
        radial-gradient(900px 560px at 12% 12%, rgba(42,143,141,.18), transparent 60%),
        radial-gradient(760px 520px at 88% 18%, rgba(240,183,74,.16), transparent 60%),
        radial-gradient(760px 520px at 86% 90%, rgba(228,102,79,.12), transparent 55%),
        linear-gradient(180deg, var(--bgA) 0%, var(--bgB) 100%);
    }

    .wrap{ max-width: 1180px; margin: 0 auto; padding: 16px 14px 28px; }
    .shell{ display:grid; grid-template-columns: 360px 1fr; gap: 16px; align-items: start; margin-top: 14px; }
    @media (max-width: 980px){ .shell{ grid-template-columns: 1fr; } .side{ position: static !important; } }

    .hero{
      border-radius: 22px; overflow:hidden;
      border: 1px solid rgba(231,220,203,.9);
      box-shadow: var(--shadow);
      background: rgba(255,255,255,.70);
      backdrop-filter: blur(8px);
    }
    .heroTop{
      display:flex; align-items:center; justify-content: space-between; gap: 12px;
      padding: 12px 14px;
      border-bottom: 1px solid rgba(231,220,203,.9);
      background: linear-gradient(90deg, rgba(42,143,141,.16), rgba(240,183,74,.12), rgba(228,102,79,.10));
    }
    .brand{ display:flex; align-items:center; gap: 10px; }
    .dot{
      width: 14px; height: 14px; border-radius: 999px;
      background: conic-gradient(from 220deg, var(--teal), var(--ochre), var(--coral), var(--plum), var(--teal));
      box-shadow: 0 10px 18px rgba(2,6,23,.18);
    }
    .brandTitle h1{ margin:0; font-size: 16px; letter-spacing: .7px; text-transform: uppercase; }
    .brandTitle small{ display:block; margin-top: 2px; font-size: 12px; color: rgba(15,23,42,.72); }
    .badge{
      font-size: 12px; padding: 6px 10px; border-radius: 999px;
      background: rgba(255,255,255,.80);
      border: 1px solid rgba(231,220,203,.9);
      color: rgba(15,23,42,.72);
      white-space: nowrap;
    }

    .heroBody{
      display:grid; grid-template-columns: 1.1fr .9fr; gap: 12px;
      padding: 12px 14px 14px;
      background:
        radial-gradient(760px 220px at 18% 0%, rgba(42,143,141,.12), transparent 62%),
        radial-gradient(760px 220px at 80% 100%, rgba(240,183,74,.10), transparent 62%);
    }
    @media (max-width: 880px){ .heroBody{ grid-template-columns: 1fr; } }
    .heroText{
      background: rgba(255,255,255,.82);
      border: 1px solid rgba(231,220,203,.9);
      border-radius: 18px;
      padding: 12px;
      box-shadow: var(--shadow2);
    }
    .heroText p{ margin:0; color: var(--muted); font-size: 14px; line-height: 1.35; }
    .heroText b{ color: var(--ink); }

    .banner{
      border-radius: 18px; overflow:hidden;
      border: 1px solid rgba(231,220,203,.9);
      box-shadow: var(--shadow2);
      background:#fff;
      min-height: 128px;
      display:flex; align-items:stretch;
    }
    .banner svg{ width:100%; height:100%; display:block; }

    .side{
      position: sticky; top: 14px;
      display:flex; flex-direction:column; gap: 12px;
    }

    .card{
      background: rgba(255,255,255,.82);
      border: 1px solid rgba(231,220,203,.95);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 14px;
      backdrop-filter: blur(8px);
    }
    .card h2{ margin: 0 0 10px; font-size: 14px; letter-spacing:.2px; text-transform: uppercase; color: rgba(15,23,42,.85); }

    .row{ display:grid; grid-template-columns: 1fr 1fr; gap:10px; }
    @media (max-width: 420px){ .row{ grid-template-columns: 1fr; } }

    label{ display:block; font-size: 13px; margin: 0 0 6px; color: var(--muted); }

    input[type="text"], textarea{
      width:100%;
      padding: 10px 10px;
      border-radius: 14px;
      border: 1px solid rgba(231,220,203,.95);
      outline:none;
      background: rgba(255,255,255,.96);
      color: var(--ink);
      font-size: 14px;
      box-shadow: inset 0 1px 0 rgba(15,23,42,.03);
    }
    input[type="text"]:focus, textarea:focus{
      border-color: rgba(42,143,141,.45);
      box-shadow: 0 0 0 4px rgba(42,143,141,.14);
    }
    textarea{ min-height: 84px; resize: vertical; }

    .btns{ display:flex; flex-wrap: wrap; gap: 10px; margin-top: 10px; }
    button{
      border: 1px solid rgba(231,220,203,.95);
      background: rgba(255,255,255,.95);
      color: var(--ink);
      border-radius: 14px;
      padding: 10px 12px;
      font-weight: 780;
      font-size: 13px;
      cursor:pointer;
      transition: transform .05s ease, box-shadow .2s ease, border-color .2s ease;
    }
    button:hover{ box-shadow: 0 12px 20px rgba(2,6,23,.10); border-color: rgba(217,205,187,1); }
    button:active{ transform: translateY(1px); }
    .primary{ background: linear-gradient(180deg, rgba(42,143,141,.95), rgba(30,111,109,.98)); color:#fff; border-color: rgba(42,143,141,.55); }
    .danger{ background: linear-gradient(180deg, rgba(228,102,79,.95), rgba(200,78,57,.98)); color:#fff; border-color: rgba(228,102,79,.55); }

    .main{ display:flex; flex-direction: column; gap: 12px; }

    .section{
      background: rgba(255,255,255,.84);
      border: 1px solid rgba(231,220,203,.95);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 14px;
      position: relative;
      overflow:hidden;
      backdrop-filter: blur(8px);
    }
    .stripe{ position:absolute; left:0; top:0; bottom:0; width: 10px; background: linear-gradient(180deg, var(--teal), rgba(42,143,141,.35)); opacity:.95; }
    .section[data-tone="ochre"] .stripe{ background: linear-gradient(180deg, var(--ochre), rgba(240,183,74,.35)); }
    .section[data-tone="coral"] .stripe{ background: linear-gradient(180deg, var(--coral), rgba(228,102,79,.35)); }
    .section[data-tone="plum"]  .stripe{ background: linear-gradient(180deg, var(--plum), rgba(138,107,189,.35)); }

    .sectionInner{ position:relative; padding-left: 10px; }
    .sectionHeader{ display:flex; align-items:flex-start; justify-content: space-between; gap: 10px; margin-bottom: 10px; }
    .sectionHeader h3{ margin: 0; font-size: 15px; letter-spacing:.2px; }
    .rule{
      font-size: 12px; color: rgba(15,23,42,.70);
      white-space: nowrap;
      border: 1px dashed rgba(217,205,187,1);
      padding: 6px 10px; border-radius: 999px; background: rgba(255,255,255,.82);
    }

    .options{ display:flex; flex-direction: column; gap: 8px; }
    .opt{
      display:flex; align-items:flex-start; gap: 10px;
      padding: 10px 10px;
      border-radius: 14px;
      border: 1px solid rgba(231,220,203,.95);
      background: rgba(255,255,255,.92);
      transition: border-color .2s ease, transform .05s ease, box-shadow .2s ease;
      position: relative; overflow:hidden;
    }
    .opt:before{
      content:""; position:absolute; inset:-1px;
      background-image: radial-gradient(rgba(15,23,42,.07) 1px, transparent 1px);
      background-size: 16px 16px;
      opacity: .10; pointer-events:none;
    }
    .opt:hover{ border-color: rgba(42,143,141,.45); box-shadow: 0 10px 18px rgba(2,6,23,.06); }
    .opt:active{ transform: translateY(1px); }
    .opt input{ margin-top: 2px; transform: scale(1.12); }
    .opt span{ font-size: 14px; line-height: 1.25; position: relative; }

    .inline{ display:flex; gap:10px; flex-wrap:wrap; align-items:center; margin-top: 10px; }

    .output{
      background: linear-gradient(180deg, rgba(15,23,42,.98), rgba(11,18,32,.98));
      color: #e5e7eb;
      border-radius: var(--radius);
      border: 1px solid rgba(255,255,255,.12);
      padding: 12px;
      box-shadow: 0 14px 34px rgba(11,18,32,.24);
    }
    .outputTop{ display:flex; justify-content: space-between; align-items:center; gap: 10px; margin-bottom: 10px; }
    .outputTop strong{ font-size: 13px; letter-spacing:.2px; text-transform: uppercase; }
    .meter{ font-size: 12px; color: rgba(229,231,235,.80); font-family: var(--mono); }
    pre{
      margin:0;
      white-space: pre-wrap;
      word-break: break-word;
      font-family: var(--mono);
      font-size: 12.5px;
      line-height: 1.35;
    }

    .toast{
      position: fixed;
      left: 50%;
      bottom: 16px;
      transform: translateX(-50%);
      background: rgba(15,23,42,.92);
      color: #fff;
      padding: 10px 12px;
      border-radius: 999px;
      font-size: 13px;
      border: 1px solid rgba(255,255,255,.16);
      opacity:0;
      pointer-events:none;
      transition: opacity .2s ease, transform .2s ease;
    }
    .toast.show{ opacity:1; transform: translateX(-50%) translateY(-2px); }

    .footerNote{ text-align:center; color: rgba(15,23,42,.70); font-size: 12px; margin-top: 10px; }
  </style>
</head>

<body>
  <div class="wrap">
    <header class="hero" aria-label="Header">
      <div class="heroTop">
        <div class="brand">
          <div class="dot" aria-hidden="true"></div>
          <div class="brandTitle">
            <h1>MIT PERSONLIGE MATEMATIK FORL√òB</h1>
            <small>Udfyld ‚Üí Lav prompt ‚Üí Download .txt ‚Üí send til Anders</small>
          </div>
        </div>
        <div class="badge">4. klasse GVS</div>
      </div>

      <div class="heroBody">
        <div class="heroText">
          <p>
            <b>Ingen rigtige eller forkerte svar.</b><br>
            V√¶lg det der passer dig. N√•r du er f√¶rdig, tryk <b>‚ÄúLav prompt‚Äù</b> og download som <b>.txt</b>.
          </p>
        </div>

        <div class="banner" aria-label="Header-billede">
          <!-- (samme SVG som f√∏r ‚Äì beholdt) -->
          <svg viewBox="0 0 900 220" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Birkeskov header">
            <defs>
              <linearGradient id="sky" x1="0" y1="0" x2="0" y2="1">
                <stop offset="0" stop-color="#cfeee7"/>
                <stop offset="1" stop-color="#dff3ee"/>
              </linearGradient>
              <linearGradient id="hill" x1="0" y1="0" x2="1" y2="1">
                <stop offset="0" stop-color="#2a8f8d"/>
                <stop offset="1" stop-color="#1e6f6d"/>
              </linearGradient>
              <pattern id="sprinkle" width="18" height="18" patternUnits="userSpaceOnUse">
                <circle cx="4" cy="5" r="1.2" fill="rgba(15,23,42,.35)"/>
                <circle cx="12" cy="11" r="1.2" fill="rgba(15,23,42,.28)"/>
                <circle cx="7" cy="15" r="1.1" fill="rgba(15,23,42,.22)"/>
              </pattern>
              <filter id="soft" x="-20%" y="-20%" width="140%" height="140%">
                <feGaussianBlur stdDeviation="0.6"/>
              </filter>
            </defs>

            <rect width="900" height="220" fill="url(#sky)"/>

            <path d="M0,190 C150,150 260,170 380,150 C520,125 640,155 900,120 L900,220 L0,220 Z"
                  fill="url(#hill)" opacity=".92"/>
            <path d="M0,210 C180,180 300,210 420,190 C560,165 660,185 900,165 L900,220 L0,220 Z"
                  fill="#0f3f3e" opacity=".35"/>

            <g opacity=".88" filter="url(#soft)">
              <ellipse cx="165" cy="62" rx="120" ry="36" fill="#f0b74a"/>
              <ellipse cx="610" cy="56" rx="128" ry="40" fill="#e4664f"/>
              <ellipse cx="452" cy="90" rx="150" ry="44" fill="#f4e7d5" opacity=".85"/>
              <ellipse cx="740" cy="92" rx="130" ry="44" fill="#f4e7d5" opacity=".65"/>
            </g>

            <g opacity=".35">
              <ellipse cx="165" cy="62" rx="120" ry="36" fill="url(#sprinkle)"/>
              <ellipse cx="610" cy="56" rx="128" ry="40" fill="url(#sprinkle)"/>
              <ellipse cx="452" cy="90" rx="150" ry="44" fill="url(#sprinkle)"/>
            </g>

            <g>
              <g transform="translate(110,18)">
                <rect x="0" y="0" width="48" height="176" rx="14" fill="#fffaf2"/>
                <path d="M6,168 l12,18 l12,-18 l12,18 l12,-18 v8 H6 Z" fill="#0f3f3e" opacity=".65"/>
                <g opacity=".55" fill="#0f172a">
                  <rect x="10" y="32" width="6" height="2" rx="1"/>
                  <rect x="26" y="48" width="8" height="2" rx="1"/>
                  <rect x="14" y="74" width="10" height="2" rx="1"/>
                  <rect x="28" y="98" width="6" height="2" rx="1"/>
                  <rect x="12" y="126" width="12" height="2" rx="1"/>
                </g>
              </g>

              <g transform="translate(260,10)">
                <rect x="0" y="0" width="44" height="186" rx="14" fill="#fffaf2"/>
                <path d="M6,176 l10,16 l10,-16 l10,16 l10,-16 v8 H6 Z" fill="#0f3f3e" opacity=".62"/>
                <g opacity=".55" fill="#0f172a">
                  <rect x="10" y="40" width="10" height="2" rx="1"/>
                  <rect x="20" y="62" width="12" height="2" rx="1"/>
                  <rect x="12" y="90" width="8" height="2" rx="1"/>
                  <rect x="22" y="112" width="10" height="2" rx="1"/>
                  <rect x="10" y="142" width="14" height="2" rx="1"/>
                </g>
              </g>

              <g transform="translate(430,22)">
                <rect x="0" y="0" width="52" height="170" rx="14" fill="#fffaf2"/>
                <path d="M6,160 l12,18 l12,-18 l12,18 l12,-18 v8 H6 Z" fill="#0f3f3e" opacity=".62"/>
                <g opacity=".55" fill="#0f172a">
                  <rect x="12" y="28" width="10" height="2" rx="1"/>
                  <rect x="26" y="54" width="14" height="2" rx="1"/>
                  <rect x="12" y="76" width="8" height="2" rx="1"/>
                  <rect x="28" y="102" width="10" height="2" rx="1"/>
                  <rect x="14" y="132" width="16" height="2" rx="1"/>
                </g>
              </g>

              <g transform="translate(640,16)">
                <rect x="0" y="0" width="46" height="176" rx="14" fill="#fffaf2"/>
                <path d="M6,168 l10,16 l10,-16 l10,16 l10,-16 v8 H6 Z" fill="#0f3f3e" opacity=".62"/>
                <g opacity=".55" fill="#0f172a">
                  <rect x="10" y="36" width="12" height="2" rx="1"/>
                  <rect x="22" y="58" width="10" height="2" rx="1"/>
                  <rect x="12" y="84" width="14" height="2" rx="1"/>
                  <rect x="26" y="110" width="8" height="2" rx="1"/>
                  <rect x="10" y="140" width="12" height="2" rx="1"/>
                </g>
              </g>

              <g transform="translate(780,28)">
                <rect x="0" y="0" width="42" height="164" rx="14" fill="#fffaf2"/>
                <path d="M6,156 l10,16 l10,-16 l10,16 l10,-16 v8 H6 Z" fill="#0f3f3e" opacity=".62"/>
                <g opacity=".55" fill="#0f172a">
                  <rect x="10" y="30" width="10" height="2" rx="1"/>
                  <rect x="18" y="54" width="12" height="2" rx="1"/>
                  <rect x="10" y="82" width="8" height="2" rx="1"/>
                  <rect x="20" y="104" width="10" height="2" rx="1"/>
                  <rect x="10" y="132" width="14" height="2" rx="1"/>
                </g>
              </g>
            </g>

            <g opacity=".45">
              <rect x="30" y="188" width="170" height="24" fill="url(#sprinkle)"/>
              <rect x="300" y="195" width="240" height="22" fill="url(#sprinkle)"/>
              <rect x="640" y="190" width="220" height="26" fill="url(#sprinkle)"/>
            </g>
          </svg>
        </div>
      </div>
    </header>

    <div class="shell">
      <aside class="side">
        <div class="card">
          <h2>Elev</h2>
          <div class="row">
            <div>
              <label for="studentName">Navn</label>
              <input id="studentName" type="text" placeholder="Fx Rose / Arly / ‚Ä¶">
            </div>
            <div>
              <label for="studentClass">Klasse</label>
              <input id="studentClass" type="text" placeholder="Fx 4.Y">
            </div>
          </div>
          <div class="btns">
            <button class="primary" id="makePromptBtn">Lav prompt</button>
            <button id="copyBtn">Kopi√©r</button>
            <button id="downloadBtn">Download .txt</button>
            <button class="danger" id="resetBtn">Nulstil</button>
          </div>
        </div>

        <div class="card">
          <h2>Prompt (klar til ChatGPT)</h2>
          <div class="output" role="region" aria-label="Prompt output">
            <div class="outputTop">
              <strong>Output</strong>
              <div class="meter" id="charCount">0 tegn</div>
            </div>
            <pre id="promptOut">Tryk ‚ÄúLav prompt‚Äù n√•r du er klar‚Ä¶</pre>
          </div>
          <div class="footerNote">Tip: Copy/paste hele prompten ind i ChatGPT.</div>
        </div>
      </aside>

      <main class="main" aria-label="Sp√∏rgeskema">

        <section class="section" data-tone="teal">
          <div class="stripe" aria-hidden="true"></div>
          <div class="sectionInner">
            <div class="sectionHeader">
              <h3>üß† 1. N√•r jeg arbejder med matematik ‚Ä¶</h3>
              <div class="rule">Max 1 kryds</div>
            </div>
            <div class="options">
              <label class="opt"><input type="radio" name="q1" value="Det f√∏les let for mig"><span>Det f√∏les let for mig</span></label>
              <label class="opt"><input type="radio" name="q1" value="Det f√∏les ok ‚Äì noget er let, noget er sv√¶rt"><span>Det f√∏les ok ‚Äì noget er let, noget er sv√¶rt</span></label>
              <label class="opt"><input type="radio" name="q1" value="Det f√∏les sv√¶rt, men jeg vil gerne blive bedre"><span>Det f√∏les sv√¶rt, men jeg vil gerne blive bedre</span></label>
              <label class="opt"><input type="radio" name="q1" value="Det afh√¶nger af, hvad vi arbejder med"><span>Det afh√¶nger af, hvad vi arbejder med</span></label>
            </div>
          </div>
        </section>

        <section class="section" data-tone="ochre">
          <div class="stripe" aria-hidden="true"></div>
          <div class="sectionInner">
            <div class="sectionHeader">
              <h3>üöÄ 2. N√•r vi starter p√• en ny opgave, vil jeg helst ‚Ä¶</h3>
              <div class="rule">Max 1 kryds</div>
            </div>
            <div class="options">
              <label class="opt"><input type="radio" name="q2" value="Starte med noget let og blive sikker"><span>Starte med noget let og blive sikker</span></label>
              <label class="opt"><input type="radio" name="q2" value="Starte med noget sv√¶rt og udfordre mig selv"><span>Starte med noget sv√¶rt og udfordre mig selv</span></label>
            </div>
          </div>
        </section>

        <section class="section" data-tone="plum">
          <div class="stripe" aria-hidden="true"></div>
          <div class="sectionInner">
            <div class="sectionHeader">
              <h3>üî¢ 3. Jeg vil gerne blive bedre til ‚Ä¶</h3>
              <div class="rule">V√¶lg flere</div>
            </div>
            <div class="options">
              <label class="opt"><input type="checkbox" name="q3" value="Plus og minus"><span>Plus og minus</span></label>
              <label class="opt"><input type="checkbox" name="q3" value="Gange"><span>Gange</span></label>
              <label class="opt"><input type="checkbox" name="q3" value="Division"><span>Division</span></label>
              <label class="opt"><input type="checkbox" name="q3" value="Br√∏ker (pizza-, kage- og del-tal)"><span>Br√∏ker (pizza-, kage- og del-tal üçï)</span></label>
              <label class="opt"><input type="checkbox" name="q3" value="M√•ling (tid, penge, l√¶ngde, v√¶gt)"><span>M√•ling (tid, penge, l√¶ngde, v√¶gt)</span></label>
              <label class="opt"><input type="checkbox" name="q3" value="Problemer og g√•der"><span>Problemer og g√•der</span></label>
              <label class="opt"><input type="checkbox" name="q3" value="Matematik med historier og fantasi"><span>Matematik med historier og fantasi</span></label>
            </div>
          </div>
        </section>

        <section class="section" data-tone="coral">
          <div class="stripe" aria-hidden="true"></div>
          <div class="sectionInner">
            <div class="sectionHeader">
              <h3>üéÆ 4. Matematik er sjovest for mig, n√•r det handler om ‚Ä¶</h3>
              <div class="rule">V√¶lg flere</div>
            </div>
            <div class="options">
              <label class="opt"><input type="checkbox" name="q4" value="Spil"><span>Spil</span></label>
              <label class="opt"><input type="checkbox" name="q4" value="Sport"><span>Sport</span></label>
              <label class="opt"><input type="checkbox" name="q4" value="Gaming"><span>Gaming</span></label>
              <label class="opt"><input type="checkbox" name="q4" value="Dyr"><span>Dyr</span></label>
              <label class="opt"><input type="checkbox" name="q4" value="Mad og butikker"><span>Mad og butikker</span></label>
              <label class="opt"><input type="checkbox" name="q4" value="Musik, dans eller TikTok"><span>Musik, dans eller TikTok</span></label>
              <label class="opt"><input type="checkbox" name="q4" value="Eventyr, fantasi og magi"><span>Eventyr, fantasi og magi</span></label>
              <label class="opt"><input type="checkbox" name="q4" value="Virkelige ting fra hverdagen"><span>Virkelige ting fra hverdagen</span></label>
            </div>
            <div class="inline">
              <div style="flex:1">
                <label for="q4extra">Uddyb (valgfrit)</label>
                <input id="q4extra" type="text" placeholder="Fx Minecraft, Manchester City, Blackpink, ‚Ä¶">
              </div>
            </div>
          </div>
        </section>

        <section class="section" data-tone="teal">
          <div class="stripe" aria-hidden="true"></div>
          <div class="sectionInner">
            <div class="sectionHeader">
              <h3>üß© 5. N√•r jeg arbejder bedst, er det fordi ‚Ä¶</h3>
              <div class="rule">Max 2 krydser</div>
            </div>
            <div class="options limit2" data-limit="2">
              <label class="opt"><input type="checkbox" name="q5" value="Jeg kan arbejde i ro"><span>Jeg kan arbejde i ro</span></label>
              <label class="opt"><input type="checkbox" name="q5" value="Jeg kan tale med andre"><span>Jeg kan tale med andre</span></label>
              <label class="opt"><input type="checkbox" name="q5" value="Jeg kan bev√¶ge mig lidt"><span>Jeg kan bev√¶ge mig lidt</span></label>
              <label class="opt"><input type="checkbox" name="q5" value="Jeg kan skifte mellem opgaver"><span>Jeg kan skifte mellem opgaver</span></label>
              <label class="opt"><input type="checkbox" name="q5" value="Jeg ved pr√¶cis, hvad jeg skal"><span>Jeg ved pr√¶cis, hvad jeg skal</span></label>
              <label class="opt"><input type="checkbox" name="q5" value="Jeg selv m√• v√¶lge noget"><span>Jeg selv m√• v√¶lge noget</span></label>
            </div>
          </div>
        </section>

        <section class="section" data-tone="ochre">
          <div class="stripe" aria-hidden="true"></div>
          <div class="sectionInner">
            <div class="sectionHeader">
              <h3>üë• 6. Jeg arbejder bedst ‚Ä¶</h3>
              <div class="rule">Max 1 kryds</div>
            </div>
            <div class="options">
              <label class="opt"><input type="radio" name="q6" value="Alene"><span>Alene</span></label>
              <label class="opt"><input type="radio" name="q6" value="Sammen med √©n anden"><span>Sammen med √©n anden</span></label>
              <label class="opt"><input type="radio" name="q6" value="I en lille gruppe"><span>I en lille gruppe</span></label>
              <label class="opt"><input type="radio" name="q6" value="Forskelligt ‚Äì det kommer an p√• opgaven"><span>Forskelligt ‚Äì det kommer an p√• opgaven</span></label>
            </div>
          </div>
        </section>

        <section class="section" data-tone="plum">
          <div class="stripe" aria-hidden="true"></div>
          <div class="sectionInner">
            <div class="sectionHeader">
              <h3>üõ†Ô∏è 7. N√•r jeg skal l√¶re noget nyt, hj√¶lper det mig mest at ‚Ä¶</h3>
              <div class="rule">Max 2 krydser</div>
            </div>
            <div class="options limit2" data-limit="2">
              <label class="opt"><input type="checkbox" name="q7" value="F√• det forklaret"><span>F√• det forklaret</span></label>
              <label class="opt"><input type="checkbox" name="q7" value="Se et eksempel"><span>Se et eksempel</span></label>
              <label class="opt"><input type="checkbox" name="q7" value="Pr√∏ve selv"><span>Pr√∏ve selv</span></label>
              <label class="opt"><input type="checkbox" name="q7" value="Tale med andre om det"><span>Tale med andre om det</span></label>
              <label class="opt"><input type="checkbox" name="q7" value="Tegne eller skrive"><span>Tegne eller skrive</span></label>
            </div>
          </div>
        </section>

        <section class="section" data-tone="coral">
          <div class="stripe" aria-hidden="true"></div>
          <div class="sectionInner">
            <div class="sectionHeader">
              <h3>üß† 8. N√•r noget er sv√¶rt, vil jeg helst ‚Ä¶</h3>
              <div class="rule">Max 1 kryds</div>
            </div>
            <div class="options">
              <label class="opt"><input type="radio" name="q8" value="Kunne sp√∏rge l√¶rerne"><span>Kunne sp√∏rge l√¶rerne</span></label>
              <label class="opt"><input type="radio" name="q8" value="Pr√∏ve selv f√∏rst"><span>Pr√∏ve selv f√∏rst</span></label>
              <label class="opt"><input type="radio" name="q8" value="Sp√∏rge en ven"><span>Sp√∏rge en ven</span></label>
            </div>
          </div>
        </section>

        <section class="section" data-tone="teal">
          <div class="stripe" aria-hidden="true"></div>
          <div class="sectionInner">
            <div class="sectionHeader">
              <h3>üéõÔ∏è 9. N√•r vi arbejder i matematik, vil jeg helst ‚Ä¶</h3>
              <div class="rule">Max 1 kryds</div>
            </div>
            <div class="options">
              <label class="opt"><input type="radio" name="q9" value="Have faste opgaver"><span>Have faste opgaver</span></label>
              <label class="opt"><input type="radio" name="q9" value="Kunne skifte mellem opgaver undervejs"><span>Kunne skifte mellem opgaver undervejs</span></label>
            </div>
          </div>
        </section>

        <section class="section" data-tone="ochre">
          <div class="stripe" aria-hidden="true"></div>
          <div class="sectionInner">
            <div class="sectionHeader">
              <h3>üîÑ 10. Jeg kan godt lide at ‚Ä¶</h3>
              <div class="rule">Max 1 kryds</div>
            </div>
            <div class="options">
              <label class="opt"><input type="radio" name="q10" value="Arbejde l√¶nge med √©n opgave"><span>Arbejde l√¶nge med √©n opgave</span></label>
              <label class="opt"><input type="radio" name="q10" value="Arbejde med flere sm√• opgaver"><span>Arbejde med flere sm√• opgaver</span></label>
            </div>
          </div>
        </section>

        <section class="section" data-tone="plum">
          <div class="stripe" aria-hidden="true"></div>
          <div class="sectionInner">
            <div class="sectionHeader">
              <h3>‚≠ê 11. Det g√∏r mig stolt i skolen, n√•r ‚Ä¶</h3>
              <div class="rule">Max 1 kryds</div>
            </div>
            <div class="options">
              <label class="opt"><input type="radio" name="q11" value="Jeg forst√•r noget nyt"><span>Jeg forst√•r noget nyt</span></label>
              <label class="opt"><input type="radio" name="q11" value="Jeg bliver bedre end f√∏r"><span>Jeg bliver bedre end f√∏r</span></label>
              <label class="opt"><input type="radio" name="q11" value="Jeg klarer en sv√¶r opgave"><span>Jeg klarer en sv√¶r opgave</span></label>
            </div>
          </div>
        </section>

        <section class="section" data-tone="coral">
          <div class="stripe" aria-hidden="true"></div>
          <div class="sectionInner">
            <div class="sectionHeader">
              <h3>üéí 12. Jeg vil gerne blive bedre til ‚Ä¶</h3>
              <div class="rule">V√¶lg flere</div>
            </div>
            <div class="options">
              <label class="opt"><input type="checkbox" name="q12" value="At koncentrere mig"><span>At koncentrere mig</span></label>
              <label class="opt"><input type="checkbox" name="q12" value="At arbejde selv"><span>At arbejde selv</span></label>
              <label class="opt"><input type="checkbox" name="q12" value="At arbejde sammen med andre"><span>At arbejde sammen med andre</span></label>
              <label class="opt"><input type="checkbox" name="q12" value="At forklare mine tanker"><span>At forklare mine tanker</span></label>
              <label class="opt"><input type="checkbox" name="q12" value="At turde pr√∏ve sv√¶re ting"><span>At turde pr√∏ve sv√¶re ting</span></label>
            </div>
          </div>
        </section>

        <section class="section" data-tone="teal">
          <div class="stripe" aria-hidden="true"></div>
          <div class="sectionInner">
            <div class="sectionHeader">
              <h3>üåà 13. Hvis skolen var helt perfekt for mig, ville den ‚Ä¶</h3>
              <div class="rule">V√¶lg flere</div>
            </div>
            <div class="options">
              <label class="opt"><input type="checkbox" name="q13" value="Have flere valg"><span>Have flere valg</span></label>
              <label class="opt"><input type="checkbox" name="q13" value="Have flere kreative opgaver"><span>Have flere kreative opgaver</span></label>
              <label class="opt"><input type="checkbox" name="q13" value="Have mere ro"><span>Have mere ro</span></label>
              <label class="opt"><input type="checkbox" name="q13" value="Have mere bev√¶gelse"><span>Have mere bev√¶gelse</span></label>
              <label class="opt"><input type="checkbox" name="q13" value="Have mere leg og fantasi"><span>Have mere leg og fantasi</span></label>
              <label class="opt"><input type="checkbox" name="q13" value="Have mere tid til fordybelse"><span>Have mere tid til fordybelse</span></label>
            </div>
          </div>
        </section>

        <section class="section" data-tone="ochre">
          <div class="stripe" aria-hidden="true"></div>
          <div class="sectionInner">
            <div class="sectionHeader">
              <h3>‚úçÔ∏è 14. Er der noget, vi som l√¶rere skal vide om dig? (frivilligt)</h3>
              <div class="rule">Tekst</div>
            </div>
            <div class="inline" style="margin-top:0">
              <div style="flex:1">
                <label for="q14text">Skriv her (valgfrit)</label>
                <textarea id="q14text" placeholder="Fx: Jeg elsker Erling Haaland / Jeg bliver rolig af ‚Ä¶"></textarea>
              </div>
            </div>
          </div>
        </section>

      </main>
    </div>
  </div>

  <div class="toast" id="toast" role="status" aria-live="polite"></div>

  <script>
    // Helpers
    const $ = (sel, root=document) => root.querySelector(sel);
    const $$ = (sel, root=document) => Array.from(root.querySelectorAll(sel));

    const toastEl = $("#toast");
    let toastTimer = null;
    function toast(msg){
      toastEl.textContent = msg;
      toastEl.classList.add("show");
      clearTimeout(toastTimer);
      toastTimer = setTimeout(()=>toastEl.classList.remove("show"), 1600);
    }

    function uniq(arr){ return Array.from(new Set(arr)).filter(Boolean); }
    function getCheckedValues(name){ return $$(`input[name="${name}"]:checked`).map(i => i.value); }
    function getRadioValue(name){
      const el = $(`input[name="${name}"]:checked`);
      return el ? el.value : "";
    }

    // Max-2 limiter
    function setupLimiters(){
      $$(".limit2").forEach(group=>{
        const limit = Number(group.dataset.limit || 2);
        const inputs = $$('input[type="checkbox"]', group);
        inputs.forEach(inp=>{
          inp.addEventListener("change", ()=>{
            const checked = inputs.filter(i=>i.checked);
            if(checked.length > limit){
              inp.checked = false;
              toast(`Max ${limit} krydser her üôÇ`);
            }
          });
        });
      });
    }

    // Prompt generation (FIXED: inserts ALL answers + freetext + forces theme usage)
    function buildPrompt(){
      const studentName = ($("#studentName").value || "").trim() || "___";
      const studentClass = ($("#studentClass").value || "").trim() || "4.__";

      const answers = {
        q1: getRadioValue("q1"),
        q2: getRadioValue("q2"),
        q3: getCheckedValues("q3"),
        q4: getCheckedValues("q4"),
        q4extra: ($("#q4extra").value || "").trim(),
        q5: getCheckedValues("q5"),
        q6: getRadioValue("q6"),
        q7: getCheckedValues("q7"),
        q8: getRadioValue("q8"),
        q9: getRadioValue("q9"),
        q10: getRadioValue("q10"),
        q11: getRadioValue("q11"),
        q12: getCheckedValues("q12"),
        q13: getCheckedValues("q13"),
        q14: ($("#q14text").value || "").trim()
      };

      const fmtList = (arr) => (arr && arr.length) ? arr.map(x=>`- ${x}`).join("\n") : "- (intet valgt)";
      const fmtSingle = (s) => s ? s : "(ikke valgt)";

      // Theme tokens the model MUST use
      const themeTokens = uniq([
        ...(answers.q4 || []),
        answers.q4extra,
        answers.q14
      ]).filter(Boolean);

      const focusAreas = uniq([...(answers.q3 || [])]).filter(Boolean);

      return `Du er en dansk matematikl√¶rer for 4. klasse og didaktisk designer.

DU SKAL LAVE √âT SAMMENH√ÜNGENDE MATEMATIK-PROJEKT (som en mini-matematikbog), hvor alt h√¶nger sammen fra start til slut.
Det skal f√∏les som en ‚Äúmission: fra valg til resultat‚Äù med faste trin, rammer, og et tydeligt slutprodukt.

KRAV (skal overholdes):
- Varighed: 2 lektioner √° 45 minutter (2√ó45 min).
- Output: KUN opgaver/arbejdsark-tekst. Ingen beskeder til l√¶rer eller elever. Ingen introduktion. Ingen forklaringer.
- Printbart A4-layout med tydelige sektioner, opgavebokse, nummerering og ‚ÄúSvar: ____‚Äù.
- Differentiering: For HVER lektion skal der v√¶re 3 spor: Basis / Plus / Challenge.
- Realistisk 4. klasse med stor niveauspredning:
  - Basis kan l√∏ses af elever der k√¶mper.
  - Challenge str√¶kker de st√¶rke.
- Brug elevens interesser aktivt i hele projektets verden (samme setting gennem begge lektioner).

PROJEKTSTRUKTUR (SKAL BRUGES I ALLE 6 BLOKKE: L1+L2 √ó Basis/Plus/Challenge):
TRIN 1 ‚Äî V√ÜLG (konkrete valg med tal/regler)
TRIN 2 ‚Äî PLANL√ÜG/TEGN (felter/placering/areal/overblik)
TRIN 3 ‚Äî BUDGET/REGN (tabel, total, kontrol)
TRIN 4 ‚Äî BONUS (point/tid/indtjening/resultat)
TRIN 5 ‚Äî EKSTRA (sv√¶rere twist)

S√ÖDAN BLIVER DET PERSONLIGT (SKAL OVERHOLDES):
- V√¶lg √©t samlet tema-univers ud fra elevens interesse-input.
- Brug MINIMUM 3 konkrete elev-ord/navne fra listen herunder direkte i opgaverne (som hold/navne/koncertnavn/targets osv.):
${themeTokens.length ? themeTokens.map(t=>`- ${t}`).join("\n") : "- (ingen tema-ord angivet ‚Üí v√¶lg neutralt skoletema)"}

- Hvis der st√•r et specifikt navn (fx ‚ÄúManchester City‚Äù / ‚ÄúErling Haaland‚Äù), s√• SKAL de ord st√• i opgaverne.

ELEVINFO:
Navn: ${studentName}
Klasse: ${studentClass}

ELEVENS SVAR:
1) Matematik f√∏les: ${fmtSingle(answers.q1)}
2) Start: ${fmtSingle(answers.q2)}
3) Fokusomr√•der:
${fmtList(answers.q3)}
4) Interesse-kryds:
${fmtList(answers.q4)}
4b) Uddyb: ${answers.q4extra ? answers.q4extra : "(ingen)"}
5) Arbejder bedst n√•r (max 2):
${fmtList(answers.q5)}
6) Arbejder bedst: ${fmtSingle(answers.q6)}
7) L√¶rer bedst ved (max 2):
${fmtList(answers.q7)}
8) N√•r sv√¶rt: ${fmtSingle(answers.q8)}
9) Fast/skifte: ${fmtSingle(answers.q9)}
10) Lange/korte: ${fmtSingle(answers.q10)}
11) Stolt n√•r: ${fmtSingle(answers.q11)}
12) Vil blive bedre til:
${fmtList(answers.q12)}
13) Perfekt skole:
${fmtList(answers.q13)}
14) Ekstra:
${answers.q14 ? answers.q14 : "(ingen)"}

MATEMATIK-INDHOLD:
- Brug is√¶r elevens fokusomr√•der fra #3: ${focusAreas.length ? focusAreas.join(", ") : "v√¶lg ud fra svarene"}.
- Brug blanding af plus/minus, gange/division, m√•ling, br√∏ker og probleml√∏sning ‚Äì s√• det f√∏les som rigtig matematik.
- Tallene skal passe til 4. klasse, men Challenge m√• v√¶re tydeligt udfordrende.

SAMMENH√ÜNG (DET DER G√òR DET ‚ÄúGENIALT‚Äù):
- Projektet skal have 3 ‚Äúankre‚Äù, som bruges igen og igen:
  1) En VALGLISTE (hvad eleven v√¶lger i trin 1)
  2) En PLAN/OVERSIGT (trin 2)
  3) Et BUDGET/REGNSKAB (trin 3)
- Lektion 2 skal bygge videre p√• lektion 1 og BRUGE elevens egne ankertal mindst 2 steder.

OUTPUTFORMAT (SKAL V√ÜRE PR√ÜCIS):
- Overskrift: ‚ÄúMATEMATIK-PROJEKT: [navn der passer til temaet]‚Äù
- Underoverskrift: ‚ÄúElev: ${studentName} ¬∑ Klasse: ${studentClass}‚Äù
- LEKTION 1 (45 min)
  - BASIS / PLUS / CHALLENGE (3 separate blokke)
  - Inde i hver blok: TRIN 1‚Äì5 med tydelige underoverskrifter og opgavebokse.
- LEKTION 2 (45 min)
  - BASIS / PLUS / CHALLENGE (3 separate blokke)
  - Inde i hver blok: TRIN 1‚Äì5 og tydelig ‚Äúforts√¶ttelse‚Äù af lektion 1.

VIGTIGT: Din respons skal KUN v√¶re arbejdsarket i printbart layout. Intet andet.`;
    }

    function setPromptOut(text){
      $("#promptOut").textContent = text;
      $("#charCount").textContent = `${text.length} tegn`;
    }

    async function copyPrompt(){
      const text = $("#promptOut").textContent || "";
      if(!text || text.includes("Tryk ‚ÄúLav prompt‚Äù")){ toast("Lav prompt f√∏rst üôÇ"); return; }
      try{
        await navigator.clipboard.writeText(text);
        toast("Kopieret ‚úÖ");
      }catch(e){
        const ta = document.createElement("textarea");
        ta.value = text;
        document.body.appendChild(ta);
        ta.select();
        document.execCommand("copy");
        ta.remove();
        toast("Kopieret ‚úÖ");
      }
    }

    function downloadTxt(){
      const text = $("#promptOut").textContent || "";
      if(!text || text.includes("Tryk ‚ÄúLav prompt‚Äù")){ toast("Lav prompt f√∏rst üôÇ"); return; }

      const name = ($("#studentName").value || "elev").trim().replace(/[^\w\-]+/g,"_");
      const klass = ($("#studentClass").value || "klasse").trim().replace(/[^\w\-]+/g,"_");
      const filename = `prompt_${klass}_${name}.txt`;

      const blob = new Blob([text], {type:"text/plain;charset=utf-8"});
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = filename;
      document.body.appendChild(a);
      a.click();
      a.remove();
      URL.revokeObjectURL(url);
      toast("Downloaded üìÑ");
    }

    function resetAll(){
      if(!confirm("Vil du nulstille alt?")) return;
      $$("input").forEach(i=>i.checked=false);
      $("#studentName").value="";
      $("#studentClass").value="";
      $("#q4extra").value="";
      $("#q14text").value="";
      setPromptOut("Tryk ‚ÄúLav prompt‚Äù n√•r du er klar‚Ä¶");
      toast("Nulstillet");
    }

    // Init
    setupLimiters();

    $("#makePromptBtn").addEventListener("click", ()=>{
      const prompt = buildPrompt();
      setPromptOut(prompt);
      toast("Prompt klar ‚úÖ");
    });

    $("#copyBtn").addEventListener("click", copyPrompt);
    $("#downloadBtn").addEventListener("click", downloadTxt);
    $("#resetBtn").addEventListener("click", resetAll);
  </script>
</body>
</html>
