<!doctype html>
<html lang="da">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Min mÃ¥de at lÃ¦re pÃ¥ â€“ 4Y</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <main class="wrap">
    <header class="card">
      <h1>ğŸŒˆ MIN MÃ…DE AT LÃ†RE PÃ…</h1>
      <p class="lead">(hjÃ¦lp os med at lave den bedste skole for dig)</p>
      <ul class="rules">
        <li>ğŸ‘‰ Der er ingen rigtige eller forkerte svar.</li>
        <li>ğŸ‘‰ Du mÃ¥ gerne vÃ¦lge flere svar.</li>
        <li>ğŸ‘‰ Svar Ã¦rligt â€“ det hjÃ¦lper os med at lave bedre undervisning.</li>
      </ul>

      <div class="grid">
        <label class="field">
          <span>Dit navn</span>
          <input type="text" id="name" placeholder="Fx Elias" />
        </label>
        <label class="field">
          <span>Din klasse</span>
          <input type="text" id="class" placeholder="Fx 4Y" value="4Y" />
        </label>
      </div>
    </header>

    <form id="survey" class="card" autocomplete="off">

      <!-- 1 -->
      <section class="q">
        <h2>ğŸ§  1. NÃ¥r jeg arbejder med matematik â€¦ <span class="meta">(sÃ¦t max 1 X)</span></h2>
        <div class="options">
          <label><input type="radio" name="q1" value="Det fÃ¸les let for mig" required> Det fÃ¸les let for mig</label>
          <label><input type="radio" name="q1" value="Det fÃ¸les ok â€“ noget er let, noget er svÃ¦rt"> Det fÃ¸les ok â€“ noget er let, noget er svÃ¦rt</label>
          <label><input type="radio" name="q1" value="Det fÃ¸les svÃ¦rt, men jeg vil gerne blive bedre"> Det fÃ¸les svÃ¦rt, men jeg vil gerne blive bedre</label>
          <label><input type="radio" name="q1" value="Det afhÃ¦nger af, hvad vi arbejder med"> Det afhÃ¦nger af, hvad vi arbejder med</label>
        </div>
      </section>

      <!-- 2 -->
      <section class="q">
        <h2>ğŸš€ 2. NÃ¥r vi starter pÃ¥ en ny opgave, vil jeg helst â€¦ <span class="meta">(sÃ¦t max 1 X)</span></h2>
        <div class="options">
          <label><input type="radio" name="q2" value="Starte med noget let og blive sikker" required> Starte med noget let og blive sikker</label>
          <label><input type="radio" name="q2" value="Starte med noget svÃ¦rt og udfordre mig selv"> Starte med noget svÃ¦rt og udfordre mig selv</label>
        </div>
      </section>

      <!-- 3 -->
      <section class="q">
        <h2>ğŸ”¢ 3. Jeg vil gerne blive bedre til â€¦ <span class="meta">(sÃ¦t gerne flere X)</span></h2>
        <div class="options">
          <label><input type="checkbox" name="q3" value="Plus og minus"> Plus og minus</label>
          <label><input type="checkbox" name="q3" value="Gange"> Gange</label>
          <label><input type="checkbox" name="q3" value="Division"> Division</label>
          <label><input type="checkbox" name="q3" value="BrÃ¸ker (pizza-, kage- og del-tal)"> BrÃ¸ker (pizza-, kage- og del-tal ğŸ•)</label>
          <label><input type="checkbox" name="q3" value="MÃ¥ling (tid, penge, lÃ¦ngde, vÃ¦gt)"> MÃ¥ling (tid, penge, lÃ¦ngde, vÃ¦gt)</label>
          <label><input type="checkbox" name="q3" value="Problemer og gÃ¥der"> Problemer og gÃ¥der</label>
          <label><input type="checkbox" name="q3" value="Matematik med historier og fantasi"> Matematik med historier og fantasi</label>
        </div>
      </section>

      <!-- 4 -->
      <section class="q">
        <h2>ğŸ® 4. Matematik er sjovest for mig, nÃ¥r det handler om â€¦ <span class="meta">(sÃ¦t gerne flere X)</span></h2>
        <div class="options">
          <label><input type="checkbox" name="q4" value="Spil"> Spil</label>
          <label><input type="checkbox" name="q4" value="Sport"> Sport</label>
          <label><input type="checkbox" name="q4" value="Gaming"> Gaming</label>
          <label><input type="checkbox" name="q4" value="Dyr"> Dyr</label>
          <label><input type="checkbox" name="q4" value="Mad og butikker"> Mad og butikker</label>
          <label><input type="checkbox" name="q4" value="Musik, dans eller TikTok"> Musik, dans eller TikTok</label>
          <label><input type="checkbox" name="q4" value="Eventyr, fantasi og magi"> Eventyr, fantasi og magi</label>
          <label><input type="checkbox" name="q4" value="Virkelige ting fra hverdagen"> Virkelige ting fra hverdagen</label>
        </div>
        <label class="field">
          <span>Uddyb</span>
          <input type="text" id="q4extra" placeholder="Skriv herâ€¦" />
        </label>
      </section>

      <!-- 5 -->
      <section class="q">
        <h2>ğŸ§© 5. NÃ¥r jeg arbejder bedst, er det fordi â€¦ <span class="meta">(sÃ¦t max 2 X)</span></h2>
        <p class="hint">VÃ¦lg hÃ¸jst 2.</p>
        <div class="options" id="q5box">
          <label><input type="checkbox" name="q5" value="Jeg kan arbejde i ro"> Jeg kan arbejde i ro</label>
          <label><input type="checkbox" name="q5" value="Jeg kan tale med andre"> Jeg kan tale med andre</label>
          <label><input type="checkbox" name="q5" value="Jeg kan bevÃ¦ge mig lidt"> Jeg kan bevÃ¦ge mig lidt</label>
          <label><input type="checkbox" name="q5" value="Jeg kan skifte mellem opgaver"> Jeg kan skifte mellem opgaver</label>
          <label><input type="checkbox" name="q5" value="Jeg ved prÃ¦cis, hvad jeg skal"> Jeg ved prÃ¦cis, hvad jeg skal</label>
          <label><input type="checkbox" name="q5" value="Jeg selv mÃ¥ vÃ¦lge noget"> Jeg selv mÃ¥ vÃ¦lge noget</label>
        </div>
      </section>

      <!-- 6 -->
      <section class="q">
        <h2>ğŸ‘¥ 6. Jeg arbejder bedst â€¦ <span class="meta">(sÃ¦t 1 X)</span></h2>
        <div class="options">
          <label><input type="radio" name="q6" value="Alene" required> Alene</label>
          <label><input type="radio" name="q6" value="Sammen med Ã©n anden"> Sammen med Ã©n anden</label>
          <label><input type="radio" name="q6" value="I en lille gruppe"> I en lille gruppe</label>
          <label><input type="radio" name="q6" value="Forskelligt â€“ det kommer an pÃ¥ opgaven"> Forskelligt â€“ det kommer an pÃ¥ opgaven</label>
        </div>
      </section>

      <!-- 7 -->
      <section class="q">
        <h2>ğŸ› ï¸ 7. NÃ¥r jeg skal lÃ¦re noget nyt, hjÃ¦lper det mig mest at â€¦ <span class="meta">(sÃ¦t max 2 X)</span></h2>
        <p class="hint">VÃ¦lg hÃ¸jst 2.</p>
        <div class="options" id="q7box">
          <label><input type="checkbox" name="q7" value="FÃ¥ det forklaret"> FÃ¥ det forklaret</label>
          <label><input type="checkbox" name="q7" value="Se et eksempel"> Se et eksempel</label>
          <label><input type="checkbox" name="q7" value="PrÃ¸ve selv"> PrÃ¸ve selv</label>
          <label><input type="checkbox" name="q7" value="Tale med andre om det"> Tale med andre om det</label>
          <label><input type="checkbox" name="q7" value="Tegne eller skrive"> Tegne eller skrive</label>
        </div>
      </section>

      <!-- 8 -->
      <section class="q">
        <h2>ğŸ§  8. NÃ¥r noget er svÃ¦rt, vil jeg helst â€¦ <span class="meta">(sÃ¦t 1 X)</span></h2>
        <div class="options">
          <label><input type="radio" name="q8" value="Kunne spÃ¸rge lÃ¦rerne" required> Kunne spÃ¸rge lÃ¦rerne</label>
          <label><input type="radio" name="q8" value="PrÃ¸ve selv fÃ¸rst"> PrÃ¸ve selv fÃ¸rst</label>
          <label><input type="radio" name="q8" value="SpÃ¸rge en ven"> SpÃ¸rge en ven</label>
        </div>
      </section>

      <!-- 9 -->
      <section class="q">
        <h2>ğŸ›ï¸ 9. NÃ¥r vi arbejder i matematik, vil jeg helst â€¦ <span class="meta">(sÃ¦t 1 X)</span></h2>
        <div class="options">
          <label><input type="radio" name="q9" value="Have faste opgaver" required> Have faste opgaver</label>
          <label><input type="radio" name="q9" value="Kunne skifte mellem opgaver undervejs"> Kunne skifte mellem opgaver undervejs</label>
        </div>
      </section>

      <!-- 10 -->
      <section class="q">
        <h2>ğŸ”„ 10. Jeg kan godt lide at â€¦ <span class="meta">(sÃ¦t 1 X)</span></h2>
        <div class="options">
          <label><input type="radio" name="q10" value="Arbejde lÃ¦nge med Ã©n opgave" required> Arbejde lÃ¦nge med Ã©n opgave</label>
          <label><input type="radio" name="q10" value="Arbejde med flere smÃ¥ opgaver"> Arbejde med flere smÃ¥ opgaver</label>
        </div>
      </section>

      <!-- 11 -->
      <section class="q">
        <h2>â­ 11. Det gÃ¸r mig stolt i skolen, nÃ¥r â€¦ <span class="meta">(sÃ¦t 1 X)</span></h2>
        <div class="options">
          <label><input type="radio" name="q11" value="Jeg forstÃ¥r noget nyt" required> Jeg forstÃ¥r noget nyt</label>
          <label><input type="radio" name="q11" value="Jeg bliver bedre end fÃ¸r"> Jeg bliver bedre end fÃ¸r</label>
          <label><input type="radio" name="q11" value="Jeg klarer en svÃ¦r opgave"> Jeg klarer en svÃ¦r opgave</label>
        </div>
      </section>

      <!-- 12 -->
      <section class="q">
        <h2>ğŸ’ 12. Jeg vil gerne blive bedre til â€¦ <span class="meta">(sÃ¦t gerne flere Xâ€™er)</span></h2>
        <div class="options">
          <label><input type="checkbox" name="q12" value="At koncentrere mig"> At koncentrere mig</label>
          <label><input type="checkbox" name="q12" value="At arbejde selv"> At arbejde selv</label>
          <label><input type="checkbox" name="q12" value="At arbejde sammen med andre"> At arbejde sammen med andre</label>
          <label><input type="checkbox" name="q12" value="At forklare mine tanker"> At forklare mine tanker</label>
          <label><input type="checkbox" name="q12" value="At turde prÃ¸ve svÃ¦re ting"> At turde prÃ¸ve svÃ¦re ting</label>
        </div>
      </section>

      <!-- 13 -->
      <section class="q">
        <h2>ğŸŒˆ 13. Hvis skolen var helt perfekt for mig, ville den â€¦ <span class="meta">(sÃ¦t gerne flere Xâ€™er)</span></h2>
        <div class="options">
          <label><input type="checkbox" name="q13" value="Have flere valg"> Have flere valg</label>
          <label><input type="checkbox" name="q13" value="Have flere kreative opgaver"> Have flere kreative opgaver</label>
          <label><input type="checkbox" name="q13" value="Have mere ro"> Have mere ro</label>
          <label><input type="checkbox" name="q13" value="Have mere bevÃ¦gelse"> Have mere bevÃ¦gelse</label>
          <label><input type="checkbox" name="q13" value="Have mere leg og fantasi"> Have mere leg og fantasi</label>
          <label><input type="checkbox" name="q13" value="Have mere tid til fordybelse"> Have mere tid til fordybelse</label>
        </div>
      </section>

      <!-- 14 -->
      <section class="q">
        <h2>âœï¸ 14. Er der noget, vi som lÃ¦rere skal vide om dig? <span class="meta">(frivilligt)</span></h2>
        <textarea id="q14" rows="4" placeholder="Skriv herâ€¦"></textarea>
      </section>

      <section class="q">
        <h2>âœ… GenerÃ©r min ChatGPT-prompt</h2>
        <p class="hint">
          Tryk â€œGemâ€ for at lave en prompt, du kan kopiere direkte ind i ChatGPT for at fÃ¥ et personligt matematikforlÃ¸b.
        </p>

        <div class="actions">
          <button type="button" class="btn" id="generate">ğŸ’¾ Gem (lav prompt)</button>
          <button type="button" class="btn secondary" id="copy">ğŸ“‹ KopiÃ©r prompt</button>
          <button type="button" class="btn secondary" id="download">â¬‡ï¸ Download prompt (.txt)</button>
        </div>

        <label class="field">
          <span>Din prompt (klar til ChatGPT)</span>
          <textarea id="prompt" rows="14" readonly placeholder="Her kommer din promptâ€¦"></textarea>
        </label>

        <p class="small" id="status"></p>
      </section>

    </form>
  </main>

  <script>
    // --- Utility helpers ---
    const $ = (sel) => document.querySelector(sel);
    const $$ = (sel) => Array.from(document.querySelectorAll(sel));

    function radioValue(name){
      const el = document.querySelector(`input[name="${name}"]:checked`);
      return el ? el.value : "";
    }

    function checkboxValues(name){
      return $$(`input[name="${name}"]:checked`).map(x => x.value);
    }

    function limitCheckboxGroup(containerId, max){
      const box = document.getElementById(containerId);
      box.addEventListener("change", () => {
        const checked = box.querySelectorAll('input[type="checkbox"]:checked');
        if(checked.length > max){
          // uncheck the last changed one
          const last = box.querySelector('input[type="checkbox"]:focus');
          if(last) last.checked = false;
          // fallback: uncheck the newest by DOM order
          else checked[checked.length - 1].checked = false;
          showStatus(`Du mÃ¥ kun vÃ¦lge ${max} her ğŸ™‚`, true);
        }
      });
    }

    function showStatus(msg, warn=false){
      const s = $("#status");
      s.textContent = msg;
      s.className = "small" + (warn ? " warn" : "");
      if(msg) setTimeout(()=>{ s.textContent=""; s.className="small"; }, 2500);
    }

    // Apply max-2 limits from the doc
    limitCheckboxGroup("q5box", 2);
    limitCheckboxGroup("q7box", 2);

    function buildPrompt(data){
      // A â€œdirectly usableâ€ prompt for ChatGPT that asks for a personal math course
      return `Du er en dansk matematiklÃ¦rer for 4. klasse og didaktisk designer. 
Design et PERSONLIGT matematikforlÃ¸b til eleven ud fra elevens besvarelse.

KRAV:
- ForlÃ¸bet skal vÃ¦re differentieret og realistisk for en 4. klasse med stor niveauspredning.
- Lav et 2-ugers forlÃ¸b med 6 lektioner Ã¡ 45 minutter (kan skaleres).
- Hver lektion skal have: mÃ¥l i elevsprog, kort lÃ¦rervejledning, aktivitet/arbejdsform, 3 differentierede opgaver (Basis / Plus / Challenge), og en hurtig afslutning (exit ticket).
- Brug elevens interesser/temaer aktivt i opgavekontekster.
- RespektÃ©r elevens prÃ¦ferencer for ro/samarbejde/bevÃ¦gelse/valg og lÃ¦ringsstrategier.
- Ingen lange forklaringer til lÃ¦reren â€“ gÃ¸r det plug-and-play.

ELEVINFO:
Navn: ${data.name || "â€”"}
Klasse: ${data.className || "â€”"}

SPÃ˜RGESKEMA-SVAR:
1) NÃ¥r jeg arbejder med matematik: ${data.q1 || "â€”"}
2) NÃ¥r vi starter ny opgave: ${data.q2 || "â€”"}
3) Jeg vil gerne blive bedre til: ${data.q3.length ? data.q3.join(", ") : "â€”"}
4) Sjovest nÃ¥r det handler om: ${data.q4.length ? data.q4.join(", ") : "â€”"}${data.q4extra ? " (Uddyb: " + data.q4extra + ")" : ""}
5) Jeg arbejder bedst fordi: ${data.q5.length ? data.q5.join(", ") : "â€”"}
6) Jeg arbejder bedst: ${data.q6 || "â€”"}
7) NÃ¥r jeg skal lÃ¦re noget nyt hjÃ¦lper det mest at: ${data.q7.length ? data.q7.join(", ") : "â€”"}
8) NÃ¥r noget er svÃ¦rt vil jeg helst: ${data.q8 || "â€”"}
9) I matematik vil jeg helst: ${data.q9 || "â€”"}
10) Jeg kan godt lide at: ${data.q10 || "â€”"}
11) Det gÃ¸r mig stolt nÃ¥r: ${data.q11 || "â€”"}
12) Jeg vil gerne blive bedre til: ${data.q12.length ? data.q12.join(", ") : "â€”"}
13) Perfekt skole ville have: ${data.q13.length ? data.q13.join(", ") : "â€”"}
14) LÃ¦rerne skal vide: ${data.q14 || "â€”"}

OUTPUTFORMAT:
- Start med en ultrakort profil (5 linjer).
- Derefter â€œForlÃ¸bsoverblikâ€ (lektion 1-6).
- Derefter hver lektion udfoldet.
- Slut med 5 konkrete tips til, hvordan lÃ¦reren holder styring uden at fjerne elevens selvbestemmelse.`;
    }

    function collectData(){
      const data = {
        name: $("#name").value.trim(),
        className: $("#class").value.trim(),
        q1: radioValue("q1"),
        q2: radioValue("q2"),
        q3: checkboxValues("q3"),
        q4: checkboxValues("q4"),
        q4extra: $("#q4extra").value.trim(),
        q5: checkboxValues("q5"),
        q6: radioValue("q6"),
        q7: checkboxValues("q7"),
        q8: radioValue("q8"),
        q9: radioValue("q9"),
        q10: radioValue("q10"),
        q11: radioValue("q11"),
        q12: checkboxValues("q12"),
        q13: checkboxValues("q13"),
        q14: $("#q14").value.trim(),
        timestamp: new Date().toISOString()
      };
      return data;
    }

    function downloadText(filename, text){
      const blob = new Blob([text], {type: "text/plain;charset=utf-8"});
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = filename;
      document.body.appendChild(a);
      a.click();
      a.remove();
      URL.revokeObjectURL(url);
    }

    // --- Buttons ---
    $("#generate").addEventListener("click", () => {
      // quick validity check for required radios
      const requiredNames = ["q1","q2","q6","q8","q9","q10","q11"];
      const missing = requiredNames.filter(n => !radioValue(n));
      if(missing.length){
        showStatus("Husk at svare pÃ¥ alle spÃ¸rgsmÃ¥l med (sÃ¦t 1 X) ğŸ™‚", true);
        return;
      }

      const data = collectData();
      const prompt = buildPrompt(data);
      $("#prompt").value = prompt;
      showStatus("Prompten er klar âœ…");
      // store locally in case they refresh
      localStorage.setItem("survey_prompt_last", prompt);
    });

    $("#copy").addEventListener("click", async () => {
      const p = $("#prompt").value.trim();
      if(!p){ showStatus("Tryk fÃ¸rst â€œGem (lav prompt)â€ ğŸ™‚", true); return; }
      try{
        await navigator.clipboard.writeText(p);
        showStatus("Kopieret til udklipsholder âœ…");
      }catch(e){
        showStatus("Kunne ikke kopiere. MarkÃ©r teksten og kopier manuelt.", true);
      }
    });

    $("#download").addEventListener("click", () => {
      const p = $("#prompt").value.trim();
      if(!p){ showStatus("Tryk fÃ¸rst â€œGem (lav prompt)â€ ğŸ™‚", true); return; }
      const safeName = ($("#name").value.trim() || "elev").replace(/[^\w\-]+/g, "_");
      downloadText(`ChatGPT_prompt_${safeName}.txt`, p);
      showStatus("Downloadet âœ…");
    });

    // Restore if exists
    const last = localStorage.getItem("survey_prompt_last");
    if(last) $("#prompt").value = last;
  </script>
</body>
</html>
