<!doctype html>
<html lang="da">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>4.Y â€“ Min mÃ¥de at lÃ¦re pÃ¥ (Matematik)</title>

  <style>
    :root{
      --bg1:#fff7ed;      /* varm creme */
      --bg2:#eff6ff;      /* lys blÃ¥ */
      --ink:#0f172a;      /* mÃ¸rk tekst */
      --muted:#475569;    /* sekundÃ¦r tekst */
      --card:#ffffff;
      --line:#e2e8f0;
      --accent:#22c55e;
      --accent2:#3b82f6;
      --accent3:#f59e0b;
      --radius:22px;
      --shadow: 0 10px 25px rgba(15, 23, 42, .10);
      --max: 980px;
      --tap: 52px; /* minimum tryk-hÃ¸jde */
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      color:var(--ink);
      background:
        radial-gradient(900px 600px at 20% 10%, rgba(34,197,94,.18), transparent 55%),
        radial-gradient(900px 600px at 90% 20%, rgba(59,130,246,.18), transparent 55%),
        linear-gradient(180deg, var(--bg1), var(--bg2));
    }

    header{
      max-width:var(--max);
      margin:0 auto;
      padding:18px 14px 8px;
    }

    .hero{
      background: linear-gradient(180deg, rgba(255,255,255,.85), rgba(255,255,255,.65));
      border:1px solid rgba(226,232,240,.9);
      border-radius: 28px;
      box-shadow: var(--shadow);
      padding:16px 16px;
      display:flex;
      gap:14px;
      align-items:flex-start;
      flex-wrap:wrap;
    }

    h1{
      margin:0;
      font-size: clamp(22px, 3.3vw, 34px);
      letter-spacing:.2px;
    }

    .lead{
      margin:6px 0 0;
      color:var(--muted);
      font-size: 15px;
      line-height:1.35;
    }

    .pillRow{
      margin-top:10px;
      display:flex;
      flex-wrap:wrap;
      gap:8px;
    }

    .pill{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:9px 11px;
      border-radius: 999px;
      border:1px solid var(--line);
      background: rgba(255,255,255,.8);
      font-size: 13px;
      color: var(--muted);
    }

    main{
      max-width:var(--max);
      margin:0 auto;
      padding: 10px 14px 22px;
      display:grid;
      grid-template-columns: 1fr;
      gap:14px;
    }

    .card{
      background: var(--card);
      border:1px solid var(--line);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
    }

    .cardHead{
      padding:14px 14px 0;
    }

    .cardTitle{
      margin:0;
      display:flex;
      align-items:center;
      gap:10px;
      font-size: 18px;
    }

    .sub{
      margin:8px 0 12px;
      color: var(--muted);
      font-size: 14px;
    }

    .content{ padding: 0 14px 14px; }

    .q{
      border-top:1px solid var(--line);
      padding:14px 0;
    }
    .q:first-child{ border-top:0; }

    .qTop{
      display:flex;
      gap:10px;
      align-items:flex-start;
      justify-content:space-between;
      flex-wrap:wrap;
    }

    .qNum{
      font-weight:900;
      min-width: 40px;
      height: 40px;
      border-radius: 14px;
      display:grid;
      place-items:center;
      background: rgba(59,130,246,.12);
      color: var(--accent2);
    }

    .qText{
      flex:1;
      font-weight:900;
      font-size: 16px;
    }

    .qRule{
      font-size: 12px;
      color: var(--muted);
      background: rgba(245,158,11,.14);
      border: 1px solid rgba(245,158,11,.25);
      padding: 7px 10px;
      border-radius: 999px;
      white-space:nowrap;
    }

    .options{
      margin-top:10px;
      display:flex;
      flex-direction:column; /* <- under hinanden */
      gap:10px;
    }

    label.opt{
      display:flex;
      gap:12px;
      align-items:flex-start;
      padding: 12px 12px;
      border-radius: 18px;
      border:1px solid var(--line);
      background: rgba(248,250,252,.9);
      cursor:pointer;
      min-height: var(--tap);
      transition: transform .04s ease, box-shadow .12s ease, border-color .12s ease;
    }
    label.opt:hover{
      border-color: rgba(59,130,246,.35);
      box-shadow: 0 8px 18px rgba(59,130,246,.10);
    }
    label.opt:active{
      transform: scale(.99);
    }

    .optText{
      font-size: 15px;
      font-weight: 700;
    }

    input[type="radio"], input[type="checkbox"]{
      margin-top: 4px;
      transform: scale(1.25);
      accent-color: var(--accent2);
    }

    .inline{
      margin-top:10px;
      display:grid;
      gap:10px;
    }

    .row2{
      display:grid;
      grid-template-columns: 1fr;
      gap:10px;
    }

    .field{
      width:100%;
      padding: 12px 12px;
      border-radius: 16px;
      border: 1px solid var(--line);
      background: white;
      font-size: 15px;
      outline:none;
      min-height: var(--tap);
    }
    .field:focus{
      border-color: rgba(34,197,94,.5);
      box-shadow: 0 0 0 4px rgba(34,197,94,.15);
    }

    .actions{
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      align-items:center;
      justify-content:space-between;
      padding: 12px 14px 14px;
      border-top: 1px solid var(--line);
      background: rgba(248,250,252,.8);
    }

    .btns{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
    }

    button{
      border:0;
      cursor:pointer;
      border-radius: 16px;
      padding: 12px 14px;
      font-weight: 900;
      font-size: 14px;
      min-height: var(--tap);
    }

    .primary{
      color:white;
      background: linear-gradient(180deg, rgba(34,197,94,.95), rgba(34,197,94,.8));
      box-shadow: 0 10px 18px rgba(34,197,94,.18);
    }

    .secondary{
      color:white;
      background: linear-gradient(180deg, rgba(59,130,246,.95), rgba(59,130,246,.80));
      box-shadow: 0 10px 18px rgba(59,130,246,.18);
    }

    .ghost{
      background: white;
      border: 1px solid var(--line);
      color: var(--ink);
      font-weight: 800;
    }

    .hint{
      color: var(--muted);
      font-size: 13px;
      display:flex;
      align-items:center;
      gap:8px;
    }

    textarea{
      width:100%;
      min-height: 280px;
      padding: 12px 12px;
      border-radius: 18px;
      border:1px solid var(--line);
      background: #0b1220;
      color: #e5e7eb;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 12.8px;
      line-height: 1.4;
      outline:none;
      resize: vertical;
    }

    .note{
      margin:10px 0 0;
      font-size: 13px;
      color: var(--muted);
    }

    .toast{
      position: fixed;
      right: 14px;
      bottom: 14px;
      background: rgba(15,23,42,.95);
      color: white;
      padding: 10px 12px;
      border-radius: 16px;
      box-shadow: var(--shadow);
      border: 1px solid rgba(255,255,255,.12);
      display:none;
      max-width: 340px;
      font-size: 13px;
    }
    .toast.show{ display:block; }

    @media (min-width: 980px){
      main{ grid-template-columns: 1.05fr .95fr; align-items:start; }
      .row2{ grid-template-columns: 1fr 1fr; }
    }
  </style>
</head>

<body>
  <header>
    <div class="hero">
      <div style="flex:1; min-width:260px;">
        <h1>ğŸŒˆ Min mÃ¥de at lÃ¦re pÃ¥ â€“ Matematik (4.Y)</h1>
        <p class="lead">SÃ¦t kryds â€“ der er ingen rigtige eller forkerte svar. NÃ¥r du er fÃ¦rdig, kan du lave en tekst, der kan sÃ¦ttes direkte ind i ChatGPT.</p>
        <div class="pillRow">
          <span class="pill">âœ… Svar stÃ¥r under hinanden</span>
          <span class="pill">ğŸ§  HjÃ¦lper os med bedre matematik</span>
          <span class="pill">ğŸ“„ Kan downloades som .txt</span>
        </div>
      </div>
      <div style="min-width:220px; display:grid; gap:10px;">
        <input class="field" id="studentName" placeholder="âœï¸ Navn" autocomplete="off" />
        <input class="field" id="studentClass" placeholder="ğŸ« Klasse (fx 4Y)" autocomplete="off" />
      </div>
    </div>
  </header>

  <main>
    <!-- FORM CARD -->
    <section class="card" aria-label="SpÃ¸rgeskema">
      <div class="cardHead">
        <h2 class="cardTitle">ğŸ§© SpÃ¸rgeskema</h2>
        <p class="sub">VÃ¦lg det der passer bedst. Nogle spÃ¸rgsmÃ¥l har â€œmax 2â€.</p>
      </div>

      <form id="survey" class="content">

        <!-- 1 -->
        <div class="q">
          <div class="qTop">
            <div class="qNum">1</div>
            <div class="qText">ğŸ§  NÃ¥r jeg arbejder med matematik â€¦</div>
            <div class="qRule">max 1</div>
          </div>
          <div class="options" role="radiogroup" aria-label="Q1">
            <label class="opt"><input type="radio" name="q1" value="Det fÃ¸les let for mig"><span class="optText">Det fÃ¸les let for mig</span></label>
            <label class="opt"><input type="radio" name="q1" value="Det fÃ¸les ok â€“ noget er let, noget er svÃ¦rt"><span class="optText">Det fÃ¸les ok â€“ noget er let, noget er svÃ¦rt</span></label>
            <label class="opt"><input type="radio" name="q1" value="Det fÃ¸les svÃ¦rt, men jeg vil gerne blive bedre"><span class="optText">Det fÃ¸les svÃ¦rt, men jeg vil gerne blive bedre</span></label>
            <label class="opt"><input type="radio" name="q1" value="Det afhÃ¦nger af, hvad vi arbejder med"><span class="optText">Det afhÃ¦nger af, hvad vi arbejder med</span></label>
          </div>
        </div>

        <!-- 2 -->
        <div class="q">
          <div class="qTop">
            <div class="qNum">2</div>
            <div class="qText">ğŸš€ NÃ¥r vi starter pÃ¥ en ny opgave, vil jeg helst â€¦</div>
            <div class="qRule">max 1</div>
          </div>
          <div class="options" role="radiogroup" aria-label="Q2">
            <label class="opt"><input type="radio" name="q2" value="Starte med noget let og blive sikker"><span class="optText">Starte med noget let og blive sikker</span></label>
            <label class="opt"><input type="radio" name="q2" value="Starte med noget svÃ¦rt og udfordre mig selv"><span class="optText">Starte med noget svÃ¦rt og udfordre mig selv</span></label>
          </div>
        </div>

        <!-- 3 -->
        <div class="q">
          <div class="qTop">
            <div class="qNum">3</div>
            <div class="qText">ğŸ”¢ Jeg vil gerne blive bedre til â€¦</div>
            <div class="qRule">flere</div>
          </div>
          <div class="options" aria-label="Q3">
            <label class="opt"><input type="checkbox" name="q3" value="Plus og minus"><span class="optText">Plus og minus</span></label>
            <label class="opt"><input type="checkbox" name="q3" value="Gange"><span class="optText">Gange</span></label>
            <label class="opt"><input type="checkbox" name="q3" value="Division"><span class="optText">Division</span></label>
            <label class="opt"><input type="checkbox" name="q3" value="BrÃ¸ker (pizza-, kage- og del-tal)"><span class="optText">BrÃ¸ker (pizza-, kage- og del-tal ğŸ•)</span></label>
            <label class="opt"><input type="checkbox" name="q3" value="MÃ¥ling (tid, penge, lÃ¦ngde, vÃ¦gt)"><span class="optText">MÃ¥ling (tid, penge, lÃ¦ngde, vÃ¦gt)</span></label>
            <label class="opt"><input type="checkbox" name="q3" value="Problemer og gÃ¥der"><span class="optText">Problemer og gÃ¥der</span></label>
            <label class="opt"><input type="checkbox" name="q3" value="Matematik med historier og fantasi"><span class="optText">Matematik med historier og fantasi</span></label>
          </div>
        </div>

        <!-- 4 -->
        <div class="q">
          <div class="qTop">
            <div class="qNum">4</div>
            <div class="qText">ğŸ® Matematik er sjovest for mig, nÃ¥r det handler om â€¦</div>
            <div class="qRule">flere</div>
          </div>
          <div class="options" aria-label="Q4">
            <label class="opt"><input type="checkbox" name="q4" value="Spil"><span class="optText">Spil</span></label>
            <label class="opt"><input type="checkbox" name="q4" value="Sport"><span class="optText">Sport</span></label>
            <label class="opt"><input type="checkbox" name="q4" value="Gaming"><span class="optText">Gaming</span></label>
            <label class="opt"><input type="checkbox" name="q4" value="Dyr"><span class="optText">Dyr</span></label>
            <label class="opt"><input type="checkbox" name="q4" value="Mad og butikker"><span class="optText">Mad og butikker</span></label>
            <label class="opt"><input type="checkbox" name="q4" value="Musik, dans eller TikTok"><span class="optText">Musik, dans eller TikTok</span></label>
            <label class="opt"><input type="checkbox" name="q4" value="Eventyr, fantasi og magi"><span class="optText">Eventyr, fantasi og magi</span></label>
            <label class="opt"><input type="checkbox" name="q4" value="Virkelige ting fra hverdagen"><span class="optText">Virkelige ting fra hverdagen</span></label>
          </div>
          <div class="inline">
            <input class="field" id="q4other" placeholder="âœï¸ Uddyb (valgfrit) â€¦" autocomplete="off" />
          </div>
        </div>

        <!-- 5 -->
        <div class="q">
          <div class="qTop">
            <div class="qNum">5</div>
            <div class="qText">ğŸ§© NÃ¥r jeg arbejder bedst, er det fordi â€¦</div>
            <div class="qRule">max 2</div>
          </div>
          <div class="options" aria-label="Q5">
            <label class="opt"><input type="checkbox" name="q5" value="Jeg kan arbejde i ro"><span class="optText">Jeg kan arbejde i ro</span></label>
            <label class="opt"><input type="checkbox" name="q5" value="Jeg kan tale med andre"><span class="optText">Jeg kan tale med andre</span></label>
            <label class="opt"><input type="checkbox" name="q5" value="Jeg kan bevÃ¦ge mig lidt"><span class="optText">Jeg kan bevÃ¦ge mig lidt</span></label>
            <label class="opt"><input type="checkbox" name="q5" value="Jeg kan skifte mellem opgaver"><span class="optText">Jeg kan skifte mellem opgaver</span></label>
            <label class="opt"><input type="checkbox" name="q5" value="Jeg ved prÃ¦cis, hvad jeg skal"><span class="optText">Jeg ved prÃ¦cis, hvad jeg skal</span></label>
            <label class="opt"><input type="checkbox" name="q5" value="Jeg selv mÃ¥ vÃ¦lge noget"><span class="optText">Jeg selv mÃ¥ vÃ¦lge noget</span></label>
          </div>
        </div>

        <!-- 6 -->
        <div class="q">
          <div class="qTop">
            <div class="qNum">6</div>
            <div class="qText">ğŸ‘¥ Jeg arbejder bedst â€¦</div>
            <div class="qRule">max 1</div>
          </div>
          <div class="options" role="radiogroup" aria-label="Q6">
            <label class="opt"><input type="radio" name="q6" value="Alene"><span class="optText">Alene</span></label>
            <label class="opt"><input type="radio" name="q6" value="Sammen med Ã©n anden"><span class="optText">Sammen med Ã©n anden</span></label>
            <label class="opt"><input type="radio" name="q6" value="I en lille gruppe"><span class="optText">I en lille gruppe</span></label>
            <label class="opt"><input type="radio" name="q6" value="Forskelligt â€“ det kommer an pÃ¥ opgaven"><span class="optText">Forskelligt â€“ det kommer an pÃ¥ opgaven</span></label>
          </div>
        </div>

        <!-- 7 -->
        <div class="q">
          <div class="qTop">
            <div class="qNum">7</div>
            <div class="qText">ğŸ› ï¸ NÃ¥r jeg skal lÃ¦re noget nyt, hjÃ¦lper det mig mest at â€¦</div>
            <div class="qRule">max 2</div>
          </div>
          <div class="options" aria-label="Q7">
            <label class="opt"><input type="checkbox" name="q7" value="FÃ¥ det forklaret"><span class="optText">FÃ¥ det forklaret</span></label>
            <label class="opt"><input type="checkbox" name="q7" value="Se et eksempel"><span class="optText">Se et eksempel</span></label>
            <label class="opt"><input type="checkbox" name="q7" value="PrÃ¸ve selv"><span class="optText">PrÃ¸ve selv</span></label>
            <label class="opt"><input type="checkbox" name="q7" value="Tale med andre om det"><span class="optText">Tale med andre om det</span></label>
            <label class="opt"><input type="checkbox" name="q7" value="Tegne eller skrive"><span class="optText">Tegne eller skrive</span></label>
          </div>
        </div>

        <!-- 8 -->
        <div class="q">
          <div class="qTop">
            <div class="qNum">8</div>
            <div class="qText">ğŸ§  NÃ¥r noget er svÃ¦rt, vil jeg helst â€¦</div>
            <div class="qRule">max 1</div>
          </div>
          <div class="options" role="radiogroup" aria-label="Q8">
            <label class="opt"><input type="radio" name="q8" value="Kunne spÃ¸rge lÃ¦rerne"><span class="optText">Kunne spÃ¸rge lÃ¦rerne</span></label>
            <label class="opt"><input type="radio" name="q8" value="PrÃ¸ve selv fÃ¸rst"><span class="optText">PrÃ¸ve selv fÃ¸rst</span></label>
            <label class="opt"><input type="radio" name="q8" value="SpÃ¸rge en ven"><span class="optText">SpÃ¸rge en ven</span></label>
          </div>
        </div>

        <!-- 9 -->
        <div class="q">
          <div class="qTop">
            <div class="qNum">9</div>
            <div class="qText">ğŸ›ï¸ NÃ¥r vi arbejder i matematik, vil jeg helst â€¦</div>
            <div class="qRule">max 1</div>
          </div>
          <div class="options" role="radiogroup" aria-label="Q9">
            <label class="opt"><input type="radio" name="q9" value="Have faste opgaver"><span class="optText">Have faste opgaver</span></label>
            <label class="opt"><input type="radio" name="q9" value="Kunne skifte mellem opgaver undervejs"><span class="optText">Kunne skifte mellem opgaver undervejs</span></label>
          </div>
        </div>

        <!-- 10 -->
        <div class="q">
          <div class="qTop">
            <div class="qNum">10</div>
            <div class="qText">ğŸ”„ Jeg kan godt lide at â€¦</div>
            <div class="qRule">max 1</div>
          </div>
          <div class="options" role="radiogroup" aria-label="Q10">
            <label class="opt"><input type="radio" name="q10" value="Arbejde lÃ¦nge med Ã©n opgave"><span class="optText">Arbejde lÃ¦nge med Ã©n opgave</span></label>
            <label class="opt"><input type="radio" name="q10" value="Arbejde med flere smÃ¥ opgaver"><span class="optText">Arbejde med flere smÃ¥ opgaver</span></label>
          </div>
        </div>

        <!-- 11 -->
        <div class="q">
          <div class="qTop">
            <div class="qNum">11</div>
            <div class="qText">â­ Det gÃ¸r mig stolt i skolen, nÃ¥r â€¦</div>
            <div class="qRule">max 1</div>
          </div>
          <div class="options" role="radiogroup" aria-label="Q11">
            <label class="opt"><input type="radio" name="q11" value="Jeg forstÃ¥r noget nyt"><span class="optText">Jeg forstÃ¥r noget nyt</span></label>
            <label class="opt"><input type="radio" name="q11" value="Jeg bliver bedre end fÃ¸r"><span class="optText">Jeg bliver bedre end fÃ¸r</span></label>
            <label class="opt"><input type="radio" name="q11" value="Jeg klarer en svÃ¦r opgave"><span class="optText">Jeg klarer en svÃ¦r opgave</span></label>
          </div>
        </div>

        <!-- 12 -->
        <div class="q">
          <div class="qTop">
            <div class="qNum">12</div>
            <div class="qText">ğŸ’ Jeg vil gerne blive bedre til â€¦</div>
            <div class="qRule">flere</div>
          </div>
          <div class="options" aria-label="Q12">
            <label class="opt"><input type="checkbox" name="q12" value="At koncentrere mig"><span class="optText">At koncentrere mig</span></label>
            <label class="opt"><input type="checkbox" name="q12" value="At arbejde selv"><span class="optText">At arbejde selv</span></label>
            <label class="opt"><input type="checkbox" name="q12" value="At arbejde sammen med andre"><span class="optText">At arbejde sammen med andre</span></label>
            <label class="opt"><input type="checkbox" name="q12" value="At forklare mine tanker"><span class="optText">At forklare mine tanker</span></label>
            <label class="opt"><input type="checkbox" name="q12" value="At turde prÃ¸ve svÃ¦re ting"><span class="optText">At turde prÃ¸ve svÃ¦re ting</span></label>
          </div>
        </div>

        <!-- 13 -->
        <div class="q">
          <div class="qTop">
            <div class="qNum">13</div>
            <div class="qText">ğŸŒˆ Hvis skolen var helt perfekt for mig, ville den â€¦</div>
            <div class="qRule">flere</div>
          </div>
          <div class="options" aria-label="Q13">
            <label class="opt"><input type="checkbox" name="q13" value="Have flere valg"><span class="optText">Have flere valg</span></label>
            <label class="opt"><input type="checkbox" name="q13" value="Have flere kreative opgaver"><span class="optText">Have flere kreative opgaver</span></label>
            <label class="opt"><input type="checkbox" name="q13" value="Have mere ro"><span class="optText">Have mere ro</span></label>
            <label class="opt"><input type="checkbox" name="q13" value="Have mere bevÃ¦gelse"><span class="optText">Have mere bevÃ¦gelse</span></label>
            <label class="opt"><input type="checkbox" name="q13" value="Have mere leg og fantasi"><span class="optText">Have mere leg og fantasi</span></label>
            <label class="opt"><input type="checkbox" name="q13" value="Have mere tid til fordybelse"><span class="optText">Have mere tid til fordybelse</span></label>
          </div>
        </div>

        <!-- 14 -->
        <div class="q">
          <div class="qTop">
            <div class="qNum">14</div>
            <div class="qText">âœï¸ Er der noget, vi som lÃ¦rere skal vide om dig?</div>
            <div class="qRule">frivilligt</div>
          </div>
          <div class="inline">
            <input class="field" id="q14" placeholder="Skriv her (valgfrit) â€¦" autocomplete="off" />
          </div>
        </div>

      </form>

      <div class="actions">
        <div class="btns">
          <button class="primary" type="button" id="buildBtn">âœ¨ Lav ChatGPT-tekst</button>
          <button class="secondary" type="button" id="downloadBtn">â¬‡ï¸ Download .txt</button>
          <button class="ghost" type="button" id="resetBtn">ğŸ”„ Nulstil</button>
        </div>
        <div class="hint" id="status"> </div>
      </div>
    </section>

    <!-- OUTPUT CARD -->
    <aside class="card" aria-label="ChatGPT prompt">
      <div class="cardHead">
        <h2 class="cardTitle">ğŸ“„ Tekst til ChatGPT</h2>
        <p class="sub">KopiÃ©r og indsÃ¦t i ChatGPT â€” eller download som .txt</p>
      </div>
      <div class="content">
        <textarea id="promptOut" placeholder="Tryk â€œLav ChatGPT-tekstâ€ nÃ¥r du har sat kryds â€¦"></textarea>
        <p class="note">Tip: NÃ¥r du downloader, hedder filen fx <b>4Y_ChatGPT_prompt_Anders.txt</b></p>
      </div>
      <div class="actions">
        <div class="btns">
          <button class="secondary" type="button" id="copyBtn">ğŸ“‹ KopiÃ©r</button>
          <button class="ghost" type="button" id="selectBtn">ğŸ–Šï¸ MarkÃ©r alt</button>
        </div>
        <div class="hint">âœ… Klar til at sÃ¦tte direkte ind i ChatGPT</div>
      </div>
    </aside>
  </main>

  <div class="toast" id="toast">Kopieret âœ…</div>

  <script>
    // Helpers
    const $ = (sel, el=document) => el.querySelector(sel);
    const $$ = (sel, el=document) => Array.from(el.querySelectorAll(sel));

    const toast = (msg) => {
      const t = $("#toast");
      t.textContent = msg;
      t.classList.add("show");
      setTimeout(()=>t.classList.remove("show"), 1200);
    };

    // Enforce max checkbox rules
    const enforceMaxChecks = (name, max) => {
      const boxes = $$(`input[type="checkbox"][name="${name}"]`);
      boxes.forEach(b => b.addEventListener("change", () => {
        const checked = boxes.filter(x => x.checked);
        if (checked.length > max) {
          b.checked = false;
          toast(`Max ${max} kryds her ğŸ™‚`);
        }
      }));
    };
    enforceMaxChecks("q5", 2);
    enforceMaxChecks("q7", 2);

    const getRadio = (name) => {
      const r = $(`input[type="radio"][name="${name}"]:checked`);
      return r ? r.value : "";
    };
    const getChecks = (name) => {
      return $$(`input[type="checkbox"][name="${name}"]:checked`).map(x=>x.value);
    };

    const buildPrompt = () => {
      const studentName = ($("#studentName").value || "").trim() || "Elev";
      const studentClass = ($("#studentClass").value || "").trim() || "4Y";

      const q1 = getRadio("q1");
      const q2 = getRadio("q2");
      const q3 = getChecks("q3");
      const q4 = getChecks("q4");
      const q4other = ($("#q4other").value || "").trim();
      const q5 = getChecks("q5");
      const q6 = getRadio("q6");
      const q7 = getChecks("q7");
      const q8 = getRadio("q8");
      const q9 = getRadio("q9");
      const q10 = getRadio("q10");
      const q11 = getRadio("q11");
      const q12 = getChecks("q12");
      const q13 = getChecks("q13");
      const q14 = ($("#q14").value || "").trim();

      const answers = [
        `Navn: ${studentName}`,
        `Klasse: ${studentClass}`,
        `1) ${q1 || "â€”"}`,
        `2) ${q2 || "â€”"}`,
        `3) ${q3.length ? q3.join(", ") : "â€”"}`,
        `4) ${q4.length ? q4.join(", ") : "â€”"}${q4other ? ` (Uddyb: ${q4other})` : ""}`,
        `5) ${q5.length ? q5.join(", ") : "â€”"}`,
        `6) ${q6 || "â€”"}`,
        `7) ${q7.length ? q7.join(", ") : "â€”"}`,
        `8) ${q8 || "â€”"}`,
        `9) ${q9 || "â€”"}`,
        `10) ${q10 || "â€”"}`,
        `11) ${q11 || "â€”"}`,
        `12) ${q12.length ? q12.join(", ") : "â€”"}`,
        `13) ${q13.length ? q13.join(", ") : "â€”"}`,
        `14) ${q14 || "â€”"}`
      ].join("\n");

      // IMPORTANT: prompt must force "tasks only" output
      const prompt =
`Du er en dansk matematiklÃ¦rer for 4. klasse og didaktisk designer.

Lav et PERSONLIGT matematikforlÃ¸b til eleven ud fra elevens besvarelse.

KRAV (skal overholdes):
- Varighed: 2 lektioner Ã¡ 45 minutter (2Ã—45 min).
- Output: KUN opgaver/arbejdsark-tekst. Ingen beskeder til lÃ¦rer eller elever. Ingen introduktion. Ingen forklaringer. Bare opgaverne.
- Differentiering: For hver lektion skal der vÃ¦re 3 spor: Basis / Plus / Challenge.
- Klarhed: Super tydeligt layout, sÃ¥ det kan printes direkte.
- Realistisk 4. klasse med stor niveauspredning: Basis skal kunne lÃ¸ses af elever der kÃ¦mper; Challenge mÃ¥ strÃ¦kke de stÃ¦rke.
- Brug elevens interesser aktivt i opgavekontekster (Q4 + evt. uddybning).
- RespektÃ©r elevens prÃ¦ferencer for ro/samarbejde/bevÃ¦gelse/valg og lÃ¦ringsstrategier (Q5â€“Q10).
- Giv nok opgaver til at fylde 45 minutter per lektion.
- Opgaverne skal vÃ¦re konkrete (fx antal opgaver, tydelige delspÃ¸rgsmÃ¥l).

FORMAT (skal bruges prÃ¦cist):
LEKTION 1 (45 min)
BASIS
1) â€¦
2) â€¦
3) â€¦
PLUS
1) â€¦
2) â€¦
3) â€¦
CHALLENGE
1) â€¦
2) â€¦
3) â€¦

LEKTION 2 (45 min)
BASIS
1) â€¦
2) â€¦
3) â€¦
PLUS
1) â€¦
2) â€¦
3) â€¦
CHALLENGE
1) â€¦
2) â€¦
3) â€¦

ELEVENS SVAR:
${answers}
`;

      $("#promptOut").value = prompt;
      $("#status").textContent = "âœ… Teksten er klar!";
      return { prompt, studentName, studentClass };
    };

    // Download prompt as .txt
    const downloadTxt = () => {
      const { prompt, studentName, studentClass } = buildPrompt();
      if (!prompt.trim()) return;

      const safeName = (studentName || "Elev")
        .replace(/[^\w\-Ã¦Ã¸Ã¥Ã†Ã˜Ã… ]+/g, "")
        .trim()
        .replace(/\s+/g, "_");

      const safeClass = (studentClass || "4Y")
        .replace(/[^\w\-]+/g, "")
        .trim();

      const filename = `${safeClass}_ChatGPT_prompt_${safeName}.txt`;

      const blob = new Blob([prompt], { type: "text/plain;charset=utf-8" });
      const url = URL.createObjectURL(blob);

      const a = document.createElement("a");
      a.href = url;
      a.download = filename;
      document.body.appendChild(a);
      a.click();
      a.remove();

      URL.revokeObjectURL(url);
      toast("Downloaded âœ…");
    };

    // Buttons
    $("#buildBtn").addEventListener("click", () => {
      buildPrompt();
      toast("Prompt klar âœ…");
    });

    $("#downloadBtn").addEventListener("click", downloadTxt);

    $("#resetBtn").addEventListener("click", () => {
      $("#survey").reset();
      $("#studentName").value = "";
      $("#studentClass").value = "";
      $("#q4other").value = "";
      $("#q14").value = "";
      $("#promptOut").value = "";
      $("#status").textContent = "";
      toast("Nulstillet ğŸ”„");
    });

    $("#selectBtn").addEventListener("click", () => {
      const ta = $("#promptOut");
      ta.focus();
      ta.select();
      toast("Markeret âœï¸");
    });

    $("#copyBtn").addEventListener("click", async () => {
      const text = $("#promptOut").value.trim() || buildPrompt().prompt.trim();
      if (!text) { toast("Lav teksten fÃ¸rst ğŸ™‚"); return; }

      try{
        await navigator.clipboard.writeText(text);
        toast("Kopieret âœ…");
      }catch(e){
        const ta = $("#promptOut");
        ta.focus(); ta.select();
        document.execCommand("copy");
        toast("Kopieret âœ…");
      }
    });
  </script>
</body>
</html>
